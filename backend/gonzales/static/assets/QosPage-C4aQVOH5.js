import{j as e,a as x}from"./query-CSQiZfg4.js";import{c as j,E as p,X as R,h as E,u as A,S as M,A as v,I as Q}from"./index-B0ubW27k.js";import{a as f,R as N,U as b,B as w,G as C,V as k,T as u}from"./video-B3Pwq-HC.js";import{H as q}from"./house-Ccwmzzt4.js";import{C as y}from"./circle-check-big-CEcEdaVt.js";import"./vendor-7Rr5RJ8N.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],S=j("circle-play",B);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],_=j("swords",I),L={tv:u,video:k,"gamepad-2":C,briefcase:w,upload:b,radio:N,home:q,"play-circle":S,users:f,swords:_};function P({result:s,onClick:t}){const r=L[s.icon]||u,n=s.passed?y:p,a=s.passed?"var(--g-green)":"var(--g-red)";return e.jsxs("div",{className:"glass-card p-4 cursor-pointer transition-all hover:scale-[1.02]",onClick:t,style:{borderColor:s.passed?"var(--g-green-muted)":"var(--g-red-muted)"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s.passed?"var(--g-green-muted)":"var(--g-red-muted)"},children:e.jsx(r,{className:"w-5 h-5",style:{color:a}})}),e.jsx("span",{title:s.passed?"All requirements met for this application":"Some requirements not met - click for details",children:e.jsx(n,{className:"w-5 h-5",style:{color:a}})})]}),e.jsx("h3",{className:"font-semibold text-sm mb-1",style:{color:"var(--g-text)"},children:s.profile_name}),e.jsx("div",{className:"flex items-center gap-1 text-xs cursor-help",style:{color:"var(--g-text-secondary)"},title:"Number of quality requirements met (download, upload, ping, jitter, packet loss)",children:e.jsxs("span",{children:[s.passed_count,"/",s.total_checks," checks passed"]})}),!s.passed&&s.recommendation&&e.jsx("p",{className:"text-xs mt-2 line-clamp-2",style:{color:"var(--g-red)"},children:s.recommendation})]})}const T={tv:u,video:k,"gamepad-2":C,briefcase:w,upload:b,radio:N,home:q,"play-circle":S,users:f,swords:_};function z({check:s}){var i,l;const t=s.passed,r=t?"var(--g-green)":"var(--g-red)",n=t?"var(--g-green-muted)":"var(--g-red-muted)";let a=100;return s.required&&s.actual!==null&&(s.threshold_type==="min"?a=Math.min(100,s.actual/s.required*100):a=Math.min(100,s.required/s.actual*100)),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{style:{color:"var(--g-text)"},children:s.label}),e.jsxs("span",{style:{color:r},children:[(i=s.actual)==null?void 0:i.toFixed(1)," / ",(l=s.required)==null?void 0:l.toFixed(1)," ",s.unit]})]}),e.jsx("div",{className:"h-2 rounded-full",style:{backgroundColor:n},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${a}%`,backgroundColor:r}})}),e.jsxs("div",{className:"flex justify-between text-[10px] mt-0.5",style:{color:"var(--g-text-secondary)"},children:[e.jsx("span",{children:s.threshold_type==="min"?"Min required":"Max allowed"}),e.jsxs("span",{className:"flex items-center gap-1",children:[t?e.jsx(y,{className:"w-3 h-3"}):e.jsx(p,{className:"w-3 h-3"}),t?"Pass":"Fail"]})]})]})}function D({result:s,onClose:t}){const r=T[s.icon]||u,n=s.passed?"var(--g-green)":"var(--g-red)",a=x.useRef(null),i=x.useRef(null);return x.useEffect(()=>{var h;i.current=document.activeElement;const l=c=>{if(c.key==="Escape"){t();return}if(c.key==="Tab"&&a.current){const g=a.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),d=g[0],m=g[g.length-1];c.shiftKey&&document.activeElement===d?(c.preventDefault(),m==null||m.focus()):!c.shiftKey&&document.activeElement===m&&(c.preventDefault(),d==null||d.focus())}};document.addEventListener("keydown",l);const o=(h=a.current)==null?void 0:h.querySelector("button");return o==null||o.focus(),()=>{var c;document.removeEventListener("keydown",l),(c=i.current)==null||c.focus()}},[t]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:t,role:"presentation",children:e.jsxs("div",{ref:a,className:"glass-card p-6 w-full max-w-md",onClick:l=>l.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"qos-modal-title",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s.passed?"var(--g-green-muted)":"var(--g-red-muted)"},children:e.jsx(r,{className:"w-6 h-6",style:{color:n}})}),e.jsxs("div",{children:[e.jsx("h3",{id:"qos-modal-title",className:"font-bold",style:{color:"var(--g-text)"},children:s.profile_name}),e.jsx("p",{className:"text-sm",style:{color:n},children:s.passed?"All requirements met":"Requirements not met"})]})]}),e.jsx("button",{onClick:t,className:"p-1 rounded hover:bg-white/10","aria-label":"Close dialog",children:e.jsx(R,{className:"w-5 h-5",style:{color:"var(--g-text-secondary)"},"aria-hidden":"true"})})]}),e.jsx("div",{className:"space-y-1",children:s.checks.map((l,o)=>e.jsx(z,{check:l},o))}),!s.passed&&s.recommendation&&e.jsx("div",{className:"mt-4 p-3 rounded-lg text-sm",style:{backgroundColor:"var(--g-red-muted)",color:"var(--g-red)"},children:s.recommendation}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(E,{size:"sm",onClick:t,children:"Close"})})]})})}function V(){const{data:s,isLoading:t}=A(),[r,n]=x.useState(null);if(t)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(M,{size:32})});if(!s)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 g-animate-in",children:[e.jsx(v,{className:"w-5 h-5",style:{color:"var(--g-accent)"}}),e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--g-text)"},children:"QoS Tests"})]}),e.jsxs("div",{className:"glass-card p-8 text-center g-animate-in g-stagger-1",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4",style:{color:"var(--g-text-secondary)"}}),e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"No measurement data available yet. Run a speed test to see QoS analysis."})]})]});const a=s.passed_profiles,i=s.total_profiles,l=Math.round(a/i*100);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between g-animate-in",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5",style:{color:"var(--g-accent)"}}),e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--g-text)"},children:"QoS Tests"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:"Based on latest measurement"})]}),e.jsxs("div",{className:"glass-card p-6 g-animate-in g-stagger-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",style:{color:"var(--g-text)"},children:"Application Compatibility"}),e.jsx("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:s.summary})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-5 h-5",style:{color:"var(--g-green)"}}),e.jsx("span",{className:"text-2xl font-bold",style:{color:"var(--g-green)"},children:a})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:"Optimal"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"w-5 h-5",style:{color:"var(--g-red)"}}),e.jsx("span",{className:"text-2xl font-bold",style:{color:"var(--g-red)"},children:i-a})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:"Limited"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",style:{color:"var(--g-text-secondary)"},children:[e.jsx("span",{children:"Compatibility Score"}),e.jsxs("span",{children:[l,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full",style:{backgroundColor:"var(--g-surface)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${l}%`,backgroundColor:l>=80?"var(--g-green)":l>=50?"var(--g-amber)":"var(--g-red)"}})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 g-animate-in g-stagger-2",children:s.results.map(o=>e.jsx(P,{result:o,onClick:()=>n(o)},o.profile_id))}),e.jsxs("div",{className:"flex items-center gap-6 text-sm g-animate-in g-stagger-3",style:{color:"var(--g-text-secondary)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--g-green)"}}),e.jsx("span",{children:"All requirements met"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--g-red)"}}),e.jsx("span",{children:"Some requirements not met"})]})]}),r&&e.jsx(D,{result:r,onClose:()=>n(null)})]})}export{V as QosPage};
