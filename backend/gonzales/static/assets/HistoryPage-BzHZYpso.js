import{j as e,a as x}from"./query-CSQiZfg4.js";import{c as u,a as b,e as _,S as w,f as g}from"./index-CKlml_rk.js";import{G as D}from"./GlassCard-BeFGED1K.js";import{D as M}from"./DateRangeFilter-DHzlX5yk.js";import{f as k}from"./format-Cx2mhIEl.js";import{A as S,a as C}from"./arrow-up-Dv_zX7Du.js";import{C as z}from"./clock-DKSnGKc6.js";import"./vendor-PRsJgg41.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],E=u("arrow-up-down",F);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],P=u("trash-2",L);function m({label:c,field:r,sortBy:l,sortOrder:o,onSort:s,align:t="right"}){const i=l===r;return e.jsx("th",{className:`py-3 px-3 font-medium cursor-pointer select-none transition-colors ${t==="left"?"text-left":"text-right"}`,style:{color:"var(--g-text-secondary)",fontSize:"var(--g-text-xs)"},onClick:()=>s==null?void 0:s(r),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[c,i?o==="asc"?e.jsx(S,{className:"w-3 h-3"}):e.jsx(C,{className:"w-3 h-3"}):e.jsx(E,{className:"w-3 h-3 opacity-40"})]})})}function T({measurements:c,onDelete:r,sortBy:l,sortOrder:o,onSort:s}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"glass-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(m,{label:"Time",field:"timestamp",sortBy:l,sortOrder:o,onSort:s,align:"left"}),e.jsx(m,{label:"Download",field:"download_mbps",sortBy:l,sortOrder:o,onSort:s}),e.jsx(m,{label:"Upload",field:"upload_mbps",sortBy:l,sortOrder:o,onSort:s}),e.jsx(m,{label:"Ping",field:"ping_latency_ms",sortBy:l,sortOrder:o,onSort:s}),e.jsx(m,{label:"Jitter",field:"ping_jitter_ms",sortBy:l,sortOrder:o,onSort:s}),e.jsx("th",{className:"text-left py-3 px-3 font-medium",style:{color:"var(--g-text-secondary)",fontSize:"var(--g-text-xs)"},children:"Server"}),e.jsx("th",{className:"text-center py-3 px-3 font-medium",style:{color:"var(--g-text-secondary)",fontSize:"var(--g-text-xs)"},children:"Issues"}),e.jsx("th",{className:"py-3 px-3"})]})}),e.jsx("tbody",{children:c.map((t,i)=>{const p=t.below_download_threshold||t.below_upload_threshold;return e.jsxs("tr",{className:"g-animate-in",style:{animationDelay:`${Math.min(i*30,300)}ms`,background:p?"rgba(255, 59, 48, 0.05)":void 0},children:[e.jsx("td",{className:"py-2.5 px-3",style:{color:"var(--g-text)"},children:k(t.timestamp)}),e.jsx("td",{className:"py-2.5 px-3 text-right font-medium tabular-nums",style:{color:"var(--g-blue)"},children:t.download_mbps.toFixed(1)}),e.jsx("td",{className:"py-2.5 px-3 text-right font-medium tabular-nums",style:{color:"var(--g-green)"},children:t.upload_mbps.toFixed(1)}),e.jsx("td",{className:"py-2.5 px-3 text-right tabular-nums",style:{color:"var(--g-text)"},children:t.ping_latency_ms.toFixed(1)}),e.jsx("td",{className:"py-2.5 px-3 text-right tabular-nums",style:{color:"var(--g-text)"},children:t.ping_jitter_ms.toFixed(1)}),e.jsx("td",{className:"py-2.5 px-3 max-w-[150px] truncate",style:{color:"var(--g-text-secondary)"},children:t.server_name}),e.jsx("td",{className:"py-2.5 px-3 text-center",children:p&&e.jsxs("span",{className:"text-xs font-medium",style:{color:"var(--g-red)"},children:[t.below_download_threshold&&"DL",t.below_download_threshold&&t.below_upload_threshold&&" / ",t.below_upload_threshold&&"UL"]})}),e.jsx("td",{className:"py-2.5 px-3",children:r&&e.jsx("button",{onClick:()=>r(t.id),className:"glass-focus-ring rounded transition-colors",style:{color:"var(--g-text-secondary)"},title:"Delete",onMouseEnter:d=>d.currentTarget.style.color="var(--g-red)",onMouseLeave:d=>d.currentTarget.style.color="var(--g-text-secondary)",children:e.jsx(P,{className:"w-4 h-4"})})})]},t.id)})})]})})}function q(){const[c,r]=x.useState(1),[l,o]=x.useState(""),[s,t]=x.useState(""),[i,p]=x.useState("timestamp"),[d,h]=x.useState("desc"),y=a=>{a===i?h(N=>N==="asc"?"desc":"asc"):(p(a),h("desc")),r(1)},j={page:c,page_size:25,start_date:l?new Date(l).toISOString():void 0,end_date:s?new Date(s).toISOString():void 0,sort_by:i,sort_order:d},{data:n,isLoading:f}=b(j),v=_();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between g-animate-in",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(z,{className:"w-5 h-5"}),"History"]}),e.jsx(M,{startDate:l,endDate:s,onStartDateChange:a=>{o(a),r(1)},onEndDateChange:a=>{t(a),r(1)}})]}),e.jsx(D,{padding:"none",className:"g-animate-in g-stagger-1",children:e.jsx("div",{className:"p-5",children:f?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(w,{size:32})}):n&&n.items.length>0?e.jsxs(e.Fragment,{children:[e.jsx(T,{measurements:n.items,onDelete:a=>v.mutate(a),sortBy:i,sortOrder:d,onSort:y}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",style:{borderColor:"var(--g-border)"},children:[e.jsxs("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:[n.total," measurements total"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{size:"sm",onClick:()=>r(a=>Math.max(1,a-1)),disabled:c<=1,children:"Previous"}),e.jsxs("span",{className:"text-xs px-2 py-1",style:{color:"var(--g-text-secondary)"},children:["Page ",n.page," of ",n.pages]}),e.jsx(g,{size:"sm",onClick:()=>r(a=>Math.min(n.pages,a+1)),disabled:c>=n.pages,children:"Next"})]})]})]}):e.jsx("p",{className:"text-center py-12",style:{color:"var(--g-text-secondary)"},children:"No measurements found."})})})]})}export{q as HistoryPage};
