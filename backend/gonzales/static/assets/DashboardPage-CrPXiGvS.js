import{j as e,a as g}from"./query-CSQiZfg4.js";import{c as Y,u as re,A as R,G as ne,C as X,a as oe,Z as q,b as ie,d as le,e as ce,f as de,S as xe,g as me}from"./index-CchLvV30.js";import{G as A}from"./GlassCard-D-K6o67A.js";import{A as ue,u as H,P as T}from"./ProgressRing-YVr79DN4.js";import{f as he,a as K}from"./format-Bm42Q-0N.js";import{R as Q,L as Z,C as J,X as ee,Y as te,T as se,a as pe,b as B,c as G}from"./charts-ZBqAZ0pw.js";import{L as ge}from"./vendor-7Rr5RJ8N.js";import{C as fe}from"./chevron-right-C8-2up_M.js";import{H as ve}from"./house-DUZGzINE.js";import{R as ye,U as je,B as be,G as we,a as Ne,V as ke,T as Me}from"./video-G75cNR1g.js";import{A as ae,a as W}from"./arrow-up-Bh1bpEYq.js";import{W as $e}from"./wifi-B9mseTA2.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],Ce=Y("monitor-play",_e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Re=Y("youtube",Se);function D({label:t,sublabel:s,value:n,unit:a="Mbps",color:d,threshold:c,thresholdLabel:l}){const p=c!==void 0,u=p&&n<c,r=p&&n>=c;return e.jsxs(A,{hover:!0,className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--g-text-secondary)"},children:t}),s&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{background:"var(--g-surface)",color:"var(--g-text-secondary)"},children:s})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx(ue,{value:n,decimals:1,className:"text-5xl font-bold tracking-tight",style:{color:u?"var(--g-red)":r?"var(--g-green)":d}}),e.jsx("span",{className:"text-lg font-medium",style:{color:"var(--g-text-secondary)"},children:a})]}),p&&e.jsxs("p",{className:"text-xs mt-2 font-medium",style:{color:u?"var(--g-red)":"var(--g-green)"},children:[u?"Below threshold":"Above threshold"," (",l||`${c} ${a}`,")"]})]})}function Le({measurement:t}){return e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--g-text)"},children:"Latest Test"}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:he(t.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Server"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.server_name})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Location"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.server_location})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"ISP"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.isp})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Packet Loss"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.packet_loss_pct!==null?`${t.packet_loss_pct.toFixed(1)}%`:"N/A"})]})]})]})}function Ae({measurements:t,downloadThreshold:s,uploadThreshold:n}){const a=[...t].reverse().map(d=>({time:K(d.timestamp),download:Number(d.download_mbps.toFixed(1)),upload:Number(d.upload_mbps.toFixed(1))}));return e.jsxs(A,{children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:"Speed Over Time"}),e.jsx(Q,{width:"100%",height:300,children:e.jsxs(Z,{data:a,children:[e.jsx(J,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(ee,{dataKey:"time",tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(te,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)",unit:" Mbps"}),e.jsx(se,{contentStyle:{background:"var(--g-card-bg)",border:"1px solid var(--g-card-border)",borderRadius:"var(--g-radius-sm)",backdropFilter:"blur(20px)",fontSize:"var(--g-text-xs)"}}),e.jsx(pe,{}),s&&e.jsx(B,{y:s,stroke:"var(--g-blue)",strokeDasharray:"5 5",strokeOpacity:.7,label:{value:`Min ${s} Mbps`,position:"right",fill:"var(--g-blue)",fontSize:10}}),n&&e.jsx(B,{y:n,stroke:"var(--g-green)",strokeDasharray:"5 5",strokeOpacity:.7,label:{value:`Min ${n} Mbps`,position:"right",fill:"var(--g-green)",fontSize:10}}),e.jsx(G,{type:"monotone",dataKey:"download",stroke:"var(--g-blue)",strokeWidth:2,dot:!1,name:"Download",animationDuration:800,animationBegin:0,animationEasing:"ease-out"}),e.jsx(G,{type:"monotone",dataKey:"upload",stroke:"var(--g-green)",strokeWidth:2,dot:!1,name:"Upload",animationDuration:800,animationBegin:200,animationEasing:"ease-out"})]})})]})}function Fe({measurements:t}){const s=[...t].reverse().map(n=>({time:K(n.timestamp),ping:Number(n.ping_latency_ms.toFixed(1)),jitter:Number(n.ping_jitter_ms.toFixed(1))}));return e.jsxs(A,{children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:"Latency Over Time"}),e.jsx(Q,{width:"100%",height:250,children:e.jsxs(Z,{data:s,children:[e.jsx(J,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(ee,{dataKey:"time",tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(te,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)",unit:" ms"}),e.jsx(se,{contentStyle:{background:"var(--g-card-bg)",border:"1px solid var(--g-card-border)",borderRadius:"var(--g-radius-sm)",backdropFilter:"blur(20px)",fontSize:"var(--g-text-xs)"}}),e.jsx(G,{type:"monotone",dataKey:"ping",stroke:"var(--g-orange)",strokeWidth:2,dot:!1,name:"Ping",animationDuration:800,animationBegin:0,animationEasing:"ease-out"}),e.jsx(G,{type:"monotone",dataKey:"jitter",stroke:"var(--g-purple)",strokeWidth:2,dot:!1,name:"Jitter",animationDuration:800,animationBegin:200,animationEasing:"ease-out"})]})})]})}const Pe={netflix_4k:Me,youtube_4k:Re,zoom_hd:ke,teams_call:Ne,cloud_gaming:Ce,online_gaming:we,vpn_work:be,video_upload:je,live_streaming:ye,smart_home:ve};function Ge(){const{data:t,isLoading:s}=re();if(s||!t)return null;const n=t.passed_profiles,a=t.total_profiles,d=Math.round(n/a*100);return e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4",style:{color:"var(--g-accent)"}}),e.jsx("h3",{className:"font-semibold text-sm",style:{color:"var(--g-text)"},children:"Application Compatibility"})]}),e.jsxs(ge,{to:"/qos",className:"flex items-center gap-1 text-xs hover:underline",style:{color:"var(--g-accent)"},children:["View all",e.jsx(fe,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",style:{color:"var(--g-text-secondary)"},children:[e.jsxs("span",{children:[n," of ",a," optimal"]}),e.jsxs("span",{children:[d,"%"]})]}),e.jsx("div",{className:"h-1.5 rounded-full",style:{backgroundColor:"var(--g-surface)"},children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${d}%`,backgroundColor:d>=80?"var(--g-green)":d>=50?"var(--g-amber)":"var(--g-red)"}})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.results.slice(0,6).map(c=>{const l=Pe[c.profile_id]||R;return e.jsx("div",{title:`${c.profile_name}: ${c.passed?"Optimal":"Limited"}`,className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:c.passed?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)"},children:e.jsx(l,{className:"w-4 h-4",style:{color:c.passed?"var(--g-green)":"var(--g-red)"}})},c.profile_id)}),t.results.length>6&&e.jsxs("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-medium",style:{backgroundColor:"var(--g-surface)",color:"var(--g-text-secondary)"},children:["+",t.results.length-6]})]})]})}function De(){const t=g.useRef([]),s=g.useRef(0),[n,a]=g.useState(0),d=g.useRef(0),c=g.useCallback((u,r)=>{t.current.push({time:r,value:u}),u>s.current&&(s.current=u);const i=performance.now();i-d.current>250&&(d.current=i,a(o=>o+1))},[]),l=g.useCallback(()=>{t.current=[],s.current=0,d.current=0,a(0)},[]),p=g.useCallback(()=>{a(u=>u+1)},[]);return{samples:t.current,peak:s.current,push:c,reset:l,flush:p,version:n}}function O({value:t,max:s=1e3,label:n="Speed",color:a="var(--g-blue)",unit:d="Mbps",glowColor:c}){const l=H(t,400),p=Math.min(l,s),u=-135+p/s*270,r=80,i=100,o=100,w=c||a,C=[0,.25,.5,.75,1].map(m=>{const x=(-135+m*270)*(Math.PI/180);return{x1:i+(r-10)*Math.cos(x),y1:o+(r-10)*Math.sin(x),x2:i+r*Math.cos(x),y2:o+r*Math.sin(x),label:Math.round(m*s),lx:i+(r-18)*Math.cos(x),ly:o+(r-18)*Math.sin(x)}}),b=Array.from({length:21},(m,x)=>{const S=x/20,P=(-135+S*270)*(Math.PI/180);return{x1:i+(r-4)*Math.cos(P),y1:o+(r-4)*Math.sin(P),x2:i+r*Math.cos(P),y2:o+r*Math.sin(P),active:S<=p/s}}),N=-135*(Math.PI/180),y=u*(Math.PI/180),v=i+r*Math.cos(N),f=o+r*Math.sin(N),h=i+r*Math.cos(y),j=o+r*Math.sin(y),_=u- -135>180?1:0,k=u*(Math.PI/180),$=i+(r-18)*Math.cos(k),F=o+(r-18)*Math.sin(k),L=i+(r-20)*Math.cos(k),M=o+(r-20)*Math.sin(k);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("svg",{viewBox:"0 0 200 145",className:"w-full max-w-[260px]",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"needleGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),e.jsx("feFlood",{floodColor:w,floodOpacity:"0.6",result:"color"}),e.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"arcGlow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),e.jsx("feFlood",{floodColor:w,floodOpacity:"0.4",result:"color"}),e.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("filter",{id:"tipPulse",x:"-100%",y:"-100%",width:"300%",height:"300%",children:e.jsx("feGaussianBlur",{stdDeviation:"4"})}),e.jsxs("linearGradient",{id:"arcGradient",x1:"0",y1:"0",x2:"1",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:a,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:a,stopOpacity:"1"})]})]}),e.jsx("path",{d:`M ${i+r*Math.cos(N)} ${o+r*Math.sin(N)} A ${r} ${r} 0 1 1 ${i+r*Math.cos(135*Math.PI/180)} ${o+r*Math.sin(135*Math.PI/180)}`,fill:"none",stroke:"var(--g-border)",strokeWidth:"6",strokeLinecap:"round",opacity:"0.5"}),l>0&&e.jsx("path",{d:`M ${i+r*Math.cos(N)} ${o+r*Math.sin(N)} A ${r} ${r} 0 1 1 ${i+r*Math.cos(135*Math.PI/180)} ${o+r*Math.sin(135*Math.PI/180)}`,fill:"none",stroke:a,strokeWidth:"8",strokeLinecap:"round",filter:"url(#arcGlow)",children:e.jsx("animate",{attributeName:"opacity",values:"0.05;0.15;0.05",dur:"3s",repeatCount:"indefinite"})}),b.map((m,x)=>e.jsx("line",{x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,stroke:m.active?a:"var(--g-border)",strokeWidth:"1",strokeLinecap:"round",opacity:m.active?.8:.3},`minor-${x}`)),l>0&&e.jsx("path",{d:`M ${v} ${f} A ${r} ${r} 0 ${_} 1 ${h} ${j}`,fill:"none",stroke:"url(#arcGradient)",strokeWidth:"6",strokeLinecap:"round",filter:"url(#arcGlow)"}),C.map((m,x)=>e.jsxs("g",{children:[e.jsx("line",{x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,stroke:"var(--g-text-tertiary)",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("text",{x:m.lx,y:m.ly,textAnchor:"middle",dominantBaseline:"middle",fill:"var(--g-text-secondary)",fontSize:"7",fontWeight:"500",children:m.label})]},`major-${x}`)),e.jsx("line",{x1:i,y1:o,x2:$,y2:F,stroke:a,strokeWidth:"2",strokeLinecap:"round",filter:"url(#needleGlow)"}),e.jsx("circle",{cx:i,cy:o,r:"5",fill:a,opacity:"0.9"}),e.jsx("circle",{cx:i,cy:o,r:"3",fill:"var(--g-bg)"}),l>0&&e.jsxs("circle",{cx:L,cy:M,r:"6",fill:a,filter:"url(#tipPulse)",opacity:"0.5",children:[e.jsx("animate",{attributeName:"opacity",values:"0.3;0.7;0.3",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"r",values:"4;8;4",dur:"1.5s",repeatCount:"indefinite"})]})]}),e.jsxs("div",{className:"text-center -mt-2",children:[e.jsx("span",{className:"text-4xl font-bold tabular-nums g-number-glow-pulse",style:{color:a,"--glow-color":`${w}60`,textShadow:`0 0 20px ${w}40, 0 0 40px ${w}20`},children:l.toFixed(1)}),e.jsx("span",{className:"text-sm ml-1",style:{color:"var(--g-text-secondary)"},children:d})]}),e.jsx("span",{className:"text-xs mt-1 font-medium uppercase tracking-wider",style:{color:"var(--g-text-tertiary)"},children:n})]})}function E(t){return t.includes("--g-blue")||t==="#007AFF"?[0,122,255]:t.includes("--g-green")||t==="#34C759"?[52,199,89]:t.includes("--g-teal")?[0,199,190]:t.includes("--g-orange")?[255,149,0]:t.startsWith("#")&&t.length===7?[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)]:[0,122,255]}function U({direction:t,bandwidth:s,color:n}){const a=g.useRef(null),d=g.useRef([]),c=g.useRef(0),l=g.useRef({w:0,h:0}),p=g.useRef({direction:t,bandwidth:s,color:n});p.current={direction:t,bandwidth:s,color:n};const u=typeof window<"u"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,r=g.useCallback((i,o,w)=>{const C=p.current.bandwidth,b=Math.min(1,Math.max(.1,C/500));return{x:Math.random()*i,y:w?Math.random()*o:p.current.direction==="download"?-10:o+10,speed:(1+Math.random()*2)*(.5+b*2),radius:1+Math.random()*2.5,opacity:.3+Math.random()*.5}},[]);return g.useEffect(()=>{const i=a.current;if(!i)return;const o=i.getContext("2d");if(!o)return;if(u){const y=()=>{const f=i.getBoundingClientRect(),h=window.devicePixelRatio||1;i.width=f.width*h,i.height=f.height*h,o.scale(h,h);const[j,_,k]=E(p.current.color),$=o.createLinearGradient(0,0,0,f.height);$.addColorStop(0,`rgba(${j},${_},${k},0.03)`),$.addColorStop(.5,`rgba(${j},${_},${k},0.08)`),$.addColorStop(1,`rgba(${j},${_},${k},0.03)`),o.fillStyle=$,o.fillRect(0,0,f.width,f.height)};y();const v=new ResizeObserver(y);return v.observe(i),()=>v.disconnect()}const w=new ResizeObserver(y=>{for(const v of y){const{width:f,height:h}=v.contentRect,j=window.devicePixelRatio||1;i.width=f*j,i.height=h*j,l.current={w:f,h}}});w.observe(i);const C=i.clientWidth||400,b=i.clientHeight||300;l.current={w:C,h:b},d.current=Array.from({length:80},()=>r(C,b,!0));function N(){const{w:y,h:v}=l.current;if(y===0||v===0){c.current=requestAnimationFrame(N);return}const f=window.devicePixelRatio||1;o.clearRect(0,0,y*f,v*f),o.save(),o.scale(f,f);const{direction:h,bandwidth:j,color:_}=p.current,[k,$,F]=E(_),L=Math.min(120,Math.max(60,Math.floor(40+j/5))),M=d.current;for(;M.length<L;)M.push(r(y,v,!1));M.length>L+10&&M.splice(L,M.length-L),o.globalCompositeOperation="lighter";for(let m=M.length-1;m>=0;m--){const x=M[m];if(h==="download"){if(x.y+=x.speed,x.y>v+10){M[m]=r(y,v,!1);continue}}else if(x.y-=x.speed,x.y<-10){M[m]=r(y,v,!1);continue}const S=o.createRadialGradient(x.x,x.y,0,x.x,x.y,x.radius*3);S.addColorStop(0,`rgba(${k},${$},${F},${x.opacity})`),S.addColorStop(.4,`rgba(${k},${$},${F},${x.opacity*.4})`),S.addColorStop(1,`rgba(${k},${$},${F},0)`),o.beginPath(),o.arc(x.x,x.y,x.radius*3,0,Math.PI*2),o.fillStyle=S,o.fill()}o.restore(),c.current=requestAnimationFrame(N)}return c.current=requestAnimationFrame(N),()=>{cancelAnimationFrame(c.current),w.disconnect()}},[u,r]),e.jsx("canvas",{ref:a,className:"absolute inset-0 w-full h-full pointer-events-none",style:{opacity:.6}})}function V({samples:t,peak:s,color:n}){if(t.length<2)return null;const a=320,d=80,c=4,l=4,p=4,u=a-c*2,r=d-l-p,i=Math.max(s*1.1,10),o=t[0].time,w=t[t.length-1].time,C=Math.max(w-o,1),b=t.map(h=>{const j=c+(h.time-o)/C*u,_=l+r-h.value/i*r;return{x:j,y:_}}),N=b.map(h=>`${h.x},${h.y}`).join(" "),y=`M ${b[0].x},${l+r} `+b.map(h=>`L ${h.x},${h.y}`).join(" ")+` L ${b[b.length-1].x},${l+r} Z`,v=b[b.length-1],f="speed-graph-glow";return e.jsx("div",{className:"w-full max-w-xs mx-auto",children:e.jsxs("svg",{viewBox:`0 0 ${a} ${d}`,className:"w-full",style:{height:80},preserveAspectRatio:"none",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:f,x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),e.jsx("feFlood",{floodColor:n,floodOpacity:"0.5",result:"color"}),e.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"graph-fill-grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:n,stopOpacity:"0.02"})]})]}),[.25,.5,.75].map(h=>{const j=l+r-h*r;return e.jsx("line",{x1:c,y1:j,x2:a-c,y2:j,stroke:"var(--g-border)",strokeWidth:"0.5",opacity:"0.3"},h)}),e.jsx("path",{d:y,fill:"url(#graph-fill-grad)"}),e.jsx("polyline",{points:N,fill:"none",stroke:n,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",filter:`url(#${f})`}),e.jsxs("circle",{cx:v.x,cy:v.y,r:"4",fill:n,opacity:"0.9",children:[e.jsx("animate",{attributeName:"r",values:"3;5;3",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.9;0.5;0.9",dur:"1.5s",repeatCount:"indefinite"})]})]})})}function ze({elapsed:t,color:s="var(--g-text-secondary)"}){const n=Math.floor(t),a=Math.floor(n/60),d=n%60,c=`${a}:${String(d).padStart(2,"0")}`;return e.jsx("span",{className:"text-sm tabular-nums",style:{color:s,fontVariantNumeric:"tabular-nums"},children:c})}const Ie={idle:"Ready",started:"Initializing",ping:"Measuring Latency",download:"Download",upload:"Upload",complete:"Complete",error:"Failed"},We={idle:"var(--g-text-secondary)",started:"var(--g-teal)",ping:"var(--g-orange)",download:"var(--g-blue)",upload:"var(--g-green)",complete:"var(--g-blue)",error:"var(--g-red)"},Te={download:"#007AFF",upload:"#34C759"},Be={idle:$e,started:q,ping:R,download:W,upload:ae,complete:oe,error:X};function z({label:t,value:s,unit:n,color:a,icon:d,delay:c}){const l=H(s,900);return e.jsx("div",{className:"g-animate-in",style:{animationDelay:`${c}ms`},children:e.jsxs(A,{padding:"md",depth:"elevated",className:"text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0",style:{height:3,background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),e.jsx(d,{className:"w-4 h-4 mx-auto mb-2",style:{color:a,opacity:.7}}),e.jsx("span",{className:"text-3xl font-bold tabular-nums block g-number-glow-pulse",style:{color:a,"--glow-color":`${a}40`},children:l.toFixed(1)}),e.jsx("span",{className:"text-[11px] block mt-0.5",style:{color:"var(--g-text-secondary)"},children:n}),e.jsx("span",{className:"text-[10px] font-semibold block mt-1.5 uppercase tracking-widest",style:{color:"var(--g-text-tertiary)"},children:t})]})})}function I({icon:t,value:s,unit:n,color:a}){return e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs tabular-nums",style:{color:"var(--g-text-secondary)"},children:[e.jsx(t,{className:"w-3 h-3",style:{color:a,opacity:.8}}),e.jsx("span",{style:{color:a},children:s}),e.jsx("span",{className:"text-[10px]",children:n})]})}function Oe({progress:t}){const s=t.phase,n=We[s]||"var(--g-blue)",a=Be[s]||R,d=s!=="idle"&&s!=="complete"&&s!=="error",c=s==="download"||s==="upload",l=De(),p=g.useRef(s),[u,r]=g.useState(null),[i,o]=g.useState(null);return g.useEffect(()=>{s==="ping"&&t.ping_ms&&r(t.ping_ms),s==="download"&&t.bandwidth_mbps&&o(t.bandwidth_mbps),s==="idle"&&(r(null),o(null))},[s,t.ping_ms,t.bandwidth_mbps]),g.useEffect(()=>{p.current!==s&&((s==="download"||s==="upload")&&l.reset(),p.current=s),c&&t.bandwidth_mbps!==void 0&&t.elapsed!==void 0&&l.push(t.bandwidth_mbps,t.elapsed)},[s,t.bandwidth_mbps,t.elapsed,c,l]),e.jsxs(A,{padding:"none",depth:"elevated",className:"relative overflow-hidden",children:[c&&e.jsx(U,{direction:s,bandwidth:t.bandwidth_mbps||0,color:Te[s]||n}),s==="started"&&e.jsx(U,{direction:"download",bandwidth:5,color:"var(--g-teal)"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-5 py-8 px-6",children:[e.jsxs("div",{className:"flex items-center justify-between w-full max-w-md",children:[e.jsxs(ne,{color:n,children:[d&&e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:n,boxShadow:`0 0 8px ${n}`,animation:"g-breathe 1.5s ease-in-out infinite"}}),e.jsx(a,{className:"w-3.5 h-3.5"}),Ie[s]||s]}),e.jsxs("div",{className:"flex items-center gap-3",children:[s==="download"&&u!==null&&e.jsx(I,{icon:R,value:u.toFixed(0),unit:"ms",color:"var(--g-orange)"}),s==="upload"&&e.jsxs(e.Fragment,{children:[u!==null&&e.jsx(I,{icon:R,value:u.toFixed(0),unit:"ms",color:"var(--g-orange)"}),i!==null&&e.jsx(I,{icon:W,value:i.toFixed(0),unit:"Mbps",color:"var(--g-blue)"})]}),d&&t.elapsed!==void 0&&e.jsx(ze,{elapsed:t.elapsed,color:n})]})]},s),e.jsxs("div",{className:"w-full flex flex-col items-center gap-4 g-phase-enter",children:[s==="started"&&e.jsxs("div",{className:"flex flex-col items-center gap-5 py-4",children:[e.jsx(T,{value:30,max:100,size:130,strokeWidth:5,color:"var(--g-teal)",glow:!0,children:e.jsx(q,{className:"w-9 h-9",style:{color:"var(--g-teal)",animation:"g-breathe 2s ease-in-out infinite"}})}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--g-text-secondary)"},children:"Connecting to server..."})]}),s==="ping"&&e.jsx("div",{className:"flex flex-col items-center gap-4 py-2",children:e.jsx(T,{value:(t.progress||0)*100,max:100,size:160,strokeWidth:6,color:"var(--g-orange)",glow:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl font-bold tabular-nums g-number-glow-pulse",style:{color:"var(--g-orange)","--glow-color":"rgba(255, 149, 0, 0.4)"},children:(t.ping_ms||0).toFixed(1)}),e.jsx("span",{className:"text-xs block mt-0.5",style:{color:"var(--g-text-secondary)"},children:"ms"})]})})}),s==="download"&&e.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[e.jsx(O,{value:t.bandwidth_mbps||0,label:"Download",color:"var(--g-blue)",glowColor:"#007AFF"}),e.jsx("div",{className:"w-full max-w-xs",children:e.jsx("div",{className:"border-t pt-2",style:{borderColor:"var(--g-border)"},children:e.jsx(V,{samples:l.samples,peak:l.peak,color:"var(--g-blue)",version:l.version})})})]}),s==="upload"&&e.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[e.jsx(O,{value:t.bandwidth_mbps||0,label:"Upload",color:"var(--g-green)",glowColor:"#34C759"}),e.jsx("div",{className:"w-full max-w-xs",children:e.jsx("div",{className:"border-t pt-2",style:{borderColor:"var(--g-border)"},children:e.jsx(V,{samples:l.samples,peak:l.peak,color:"var(--g-green)",version:l.version})})})]}),s==="complete"&&e.jsx("div",{className:"w-full max-w-md py-2",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(z,{label:"Download",value:t.download_mbps||0,unit:"Mbps",color:"var(--g-blue)",icon:W,delay:0}),e.jsx(z,{label:"Upload",value:t.upload_mbps||0,unit:"Mbps",color:"var(--g-green)",icon:ae,delay:120}),e.jsx(z,{label:"Ping",value:t.ping_ms||0,unit:"ms",color:"var(--g-orange)",icon:R,delay:240})]})}),s==="error"&&e.jsxs("div",{className:"text-center g-animate-in py-4",children:[e.jsx(X,{className:"w-8 h-8 mx-auto mb-3",style:{color:"var(--g-red)",opacity:.8}}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--g-red)"},children:t.message||"An error occurred"})]})]},`content-${s}`),c&&t.progress!==void 0&&e.jsxs("div",{className:"w-full max-w-xs",children:[e.jsx("div",{className:"glass-progress",style:{height:5},children:e.jsx("div",{className:"glass-progress-bar",style:{width:`${Math.min(100,(t.progress||0)*100)}%`,background:`linear-gradient(90deg, ${n}90, ${n})`,boxShadow:`0 0 12px ${n}50`,transition:"width 0.3s ease-out"}})}),e.jsxs("p",{className:"text-[10px] text-center mt-1.5 tabular-nums font-medium",style:{color:"var(--g-text-tertiary)"},children:[Math.round((t.progress||0)*100),"%"]})]})]})]})}function tt(){const{data:t,isLoading:s}=ie(),{data:n}=le({page_size:50}),{data:a}=ce(),{progress:d,isStreaming:c}=de();if(s)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(xe,{size:32})});const l=c||d.phase!=="idle"&&d.phase!=="complete"&&d.phase!=="error";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 g-animate-in",style:{color:"var(--g-text)"},children:[e.jsx(me,{className:"w-5 h-5"}),"Dashboard"]}),l&&e.jsx("div",{className:"g-animate-scale",children:e.jsx(Oe,{progress:d})}),!l&&t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 g-animate-in g-stagger-1",children:[e.jsx(D,{label:"Download",sublabel:"Latest Test",value:t.download_mbps,color:"var(--g-blue)",threshold:a==null?void 0:a.effective_download_threshold_mbps,thresholdLabel:a?`Min. ${a.effective_download_threshold_mbps} Mbps`:void 0}),e.jsx(D,{label:"Upload",sublabel:"Latest Test",value:t.upload_mbps,color:"var(--g-green)",threshold:a==null?void 0:a.effective_upload_threshold_mbps,thresholdLabel:a?`Min. ${a.effective_upload_threshold_mbps} Mbps`:void 0}),e.jsx(D,{label:"Ping",sublabel:"Latest Test",value:t.ping_latency_ms,unit:"ms",color:"var(--g-orange)"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 g-animate-in g-stagger-2",children:[e.jsx(Le,{measurement:t}),e.jsx(Ge,{})]}),n&&n.items.length>1&&e.jsxs("div",{className:"space-y-4 g-animate-in g-stagger-3",children:[e.jsx(Ae,{measurements:n.items,downloadThreshold:a==null?void 0:a.effective_download_threshold_mbps,uploadThreshold:a==null?void 0:a.effective_upload_threshold_mbps}),e.jsx(Fe,{measurements:n.items})]})]}):l?null:e.jsxs("div",{className:"text-center py-20 g-animate-in",style:{color:"var(--g-text-secondary)"},children:[e.jsx("p",{className:"text-lg font-medium",children:"No measurements yet"}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Run Test" to perform your first speed test.'})]})]})}export{tt as DashboardPage};
