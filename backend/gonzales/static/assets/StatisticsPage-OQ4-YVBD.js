import{j as e,a as _}from"./query-CSQiZfg4.js";import{c as j,u as h,G as H,j as ie,o as O,M as se,n as w,I as de,T as te,p as me,q as xe,g as ge,e as pe,S as ue,k as ve}from"./index-Cc5-1RId.js";import{D as he}from"./DateRangeFilter-BudEyRAF.js";import{G as u}from"./GlassCard-D-K6o67A.js";import{A as y,P as F,u as ae}from"./ProgressRing-CTDihKXk.js";import{R as $,B as U,C as A,X as z,Y as K,T as D,d as k,e as ye,P as je,f as be,g as W,A as fe,b as E,h as N,c as Q,a as re}from"./charts-ZBqAZ0pw.js";import{a as X}from"./format-Bm42Q-0N.js";import{S as le}from"./shield-FNzWsnIQ.js";import{W as oe}from"./wifi-Du6kY9iz.js";import{a as q,A as Ne}from"./arrow-up-M06ytjfA.js";import{T as _e}from"./trending-down-DZ6KGRir.js";import{T as ne}from"./trending-up-CMx7OwOq.js";import"./vendor-7Rr5RJ8N.js";import"./calendar-BlkOUKUw.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],ke=j("cable",we);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],De=j("circle-arrow-down",$e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Se=j("circle-arrow-up",Me);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fe=j("circle-question-mark",Ce);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ze=j("cloud",Ae);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Le=j("star",Ke);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],Te=j("sunrise",Be);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],He=j("sunset",Re);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ge=j("trophy",qe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ce=j("wifi-off",Ve);function Y(s){return s>=1e12?`${(s/1e12).toFixed(1)} TB`:s>=1e9?`${(s/1e9).toFixed(1)} GB`:s>=1e6?`${(s/1e6).toFixed(1)} MB`:`${(s/1e3).toFixed(0)} KB`}function L({label:s,stat:t,unit:a,color:r}){return t?e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",style:{color:r},children:s}),e.jsx("div",{className:"grid grid-cols-5 gap-3 text-center",children:["min","max","avg","median","stddev"].map(o=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--g-text-secondary)"},children:o}),e.jsx(y,{value:t[o],decimals:1,className:"text-lg font-bold block",style:{color:"var(--g-text)"}}),e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:a})]},o))})]}):null}function Oe({stats:s}){const{t}=h(),a=s.total_tests>0?s.total_data_used_bytes/s.total_tests:0;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:t("statistics.totalTests")}),e.jsx(y,{value:s.total_tests,decimals:0,className:"text-3xl font-bold block",style:{color:"var(--g-text)"}})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:"Threshold Violations"}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsxs("span",{className:"text-sm",children:[e.jsx(y,{value:s.download_violations,decimals:0,className:"font-bold",style:{color:"var(--g-red)"}})," ","DL"]}),e.jsxs("span",{className:"text-sm",children:[e.jsx(y,{value:s.upload_violations,decimals:0,className:"font-bold",style:{color:"var(--g-red)"}})," ","UL"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:t("statistics.totalDataUsed")}),e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--g-text)"},children:Y(s.total_data_used_bytes)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:t("statistics.avgDataPerTest")}),e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--g-text)"},children:Y(a)})]})]})}),e.jsx(L,{label:t("common.download"),stat:s.download,unit:t("common.mbps"),color:"var(--g-blue)"}),e.jsx(L,{label:t("common.upload"),stat:s.upload,unit:t("common.mbps"),color:"var(--g-green)"}),e.jsx(L,{label:t("common.ping"),stat:s.ping,unit:t("common.ms"),color:"var(--g-orange)"})]})}function B({label:s,stat:t,unit:a,color:r}){const o=t.percentiles,l=[{label:"P5",value:o.p5},{label:"P25",value:o.p25},{label:"P50",value:o.p50},{label:"P75",value:o.p75},{label:"P95",value:o.p95}],c=Math.max(...l.map(n=>n.value),1),[d,x]=_.useState(!1);return _.useEffect(()=>{const n=setTimeout(()=>x(!0),50);return()=>clearTimeout(n)},[]),e.jsxs(u,{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-4",style:{color:r},children:[s," Percentiles"]}),e.jsx("div",{className:"space-y-2",children:l.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-8 text-xs font-medium text-right",style:{color:"var(--g-text-secondary)"},children:n.label}),e.jsx("div",{className:"flex-1 h-5 rounded-full overflow-hidden",style:{background:"var(--g-glass-bg)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:d?`${n.value/c*100}%`:"0%",backgroundColor:r,transition:`width 600ms ${150+i*80}ms cubic-bezier(0.16, 1, 0.3, 1)`}})}),e.jsxs("span",{className:"w-20 text-xs font-medium tabular-nums text-right",style:{color:"var(--g-text)"},children:[n.value.toFixed(1)," ",a]})]},n.label))})]})}function T({measurements:s,field:t,label:a,unit:r,color:o,bins:l=15}){if(s.length===0)return null;const c=s.map(v=>v[t]),d=Math.min(...c),i=(Math.max(...c)-d||1)/l,g=Array.from({length:l},(v,p)=>({range:`${(d+p*i).toFixed(0)}`,count:0}));for(const v of c){const p=Math.min(Math.floor((v-d)/i),l-1);g[p].count++}return e.jsxs(u,{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:[a," Distribution (",r,")"]}),e.jsx($,{width:"100%",height:200,children:e.jsxs(U,{data:g,children:[e.jsx(A,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(z,{dataKey:"range",tick:{fontSize:10},stroke:"var(--g-text-tertiary)"}),e.jsx(K,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(D,{}),e.jsx(k,{dataKey:"count",fill:o,radius:[4,4,0,0]})]})})]})}function Ue({data:s}){const{t}=h(),a=Math.max(...s.map(o=>o.avg_download_mbps),1),r=o=>{const l=o/a;return l===0?"var(--g-border)":`rgba(0, 122, 255, ${.15+l*.85})`};return e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("statistics.hourlyHeatmap")}),e.jsx("div",{className:"grid grid-cols-8 sm:grid-cols-12 gap-1",children:s.map(o=>e.jsxs("div",{className:"flex flex-col items-center gap-1",title:`${o.hour}:00 - Avg: ${o.avg_download_mbps.toFixed(1)} Mbps (${o.count} tests)`,children:[e.jsx("div",{className:"w-full aspect-square rounded",style:{background:r(o.avg_download_mbps),minWidth:"20px"}}),e.jsx("span",{className:"text-[9px] sm:text-[10px] tabular-nums",style:{color:"var(--g-text-tertiary)"},children:o.hour})]},o.hour))}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:["0 ",t("common.mbps")]}),e.jsx("div",{className:"flex gap-0.5",children:[.2,.4,.6,.8,1].map(o=>e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{background:`rgba(0, 122, 255, ${o})`}},o))}),e.jsxs("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:[a.toFixed(0)," ",t("common.mbps")]})]})]})}function Ie({data:s}){const{t}=h(),a=s.map(r=>({day:r.day_name.slice(0,3),download:r.avg_download_mbps,upload:r.avg_upload_mbps}));return e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("statistics.dayOfWeek")}),e.jsx($,{width:"100%",height:300,children:e.jsxs(ye,{data:a,cx:"50%",cy:"50%",outerRadius:"70%",children:[e.jsx(je,{stroke:"var(--g-border)"}),e.jsx(be,{dataKey:"day",tick:{fontSize:11,fill:"var(--g-text-secondary)"}}),e.jsx(D,{}),e.jsx(W,{name:t("common.download"),dataKey:"download",stroke:"var(--g-blue)",fill:"var(--g-blue)",fillOpacity:.15,strokeWidth:2}),e.jsx(W,{name:t("common.upload"),dataKey:"upload",stroke:"var(--g-green)",fill:"var(--g-green)",fillOpacity:.1,strokeWidth:2})]})})]})}function We({trend:s,predictions:t,enhancedPredictions:a,downloadThreshold:r,uploadThreshold:o}){const{t:l}=h();if(s.points.length===0)return null;const c=s.points.map(i=>({time:X(i.timestamp),download:Number(i.download_mbps.toFixed(1)),upload:Number(i.upload_mbps.toFixed(1))})),d=a||t;if(d&&d.points.length>0){const i=c[c.length-1];c.push({...i,pred_download:i.download,pred_upload:i.upload,...a?{dl_upper:i.download,dl_lower:i.download,ul_upper:i.upload,ul_lower:i.upload}:{}});for(const g of d.points){const v={time:X(g.timestamp),pred_download:Number(g.download_mbps.toFixed(1)),pred_upload:Number(g.upload_mbps.toFixed(1))};if(a&&"download_interval"in g){const p=g;v.dl_upper=Number(p.download_interval.upper.toFixed(1)),v.dl_lower=Number(p.download_interval.lower.toFixed(1)),v.ul_upper=Number(p.upload_interval.upper.toFixed(1)),v.ul_lower=Number(p.upload_interval.lower.toFixed(1))}c.push(v)}}const x=(i,g)=>{const v=i>0?"+":"";return`${g}: ${v}${i.toFixed(2)} ${l("common.mbps")}/day`},n=(a==null?void 0:a.confidence_level)||(t==null?void 0:t.confidence);return e.jsxs(u,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm font-semibold",style:{color:"var(--g-text)"},children:l("docs.speedTrendTitle")}),n&&e.jsxs(H,{color:"var(--g-teal)",children:[l("docs.forecastDays")," (",n,")"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs",style:{color:"var(--g-blue)"},children:x(s.download_slope,l("docs.down"))}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-green)"},children:x(s.upload_slope,l("docs.up"))})]})]}),e.jsx($,{width:"100%",height:300,children:e.jsxs(fe,{data:c,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"dlGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"var(--g-blue)",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"var(--g-blue)",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"ulGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"var(--g-green)",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"var(--g-green)",stopOpacity:0})]})]}),e.jsx(A,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(z,{dataKey:"time",tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(K,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)",unit:` ${l("common.mbps")}`}),e.jsx(D,{contentStyle:{background:"var(--g-card-bg)",border:"1px solid var(--g-card-border)",borderRadius:"var(--g-radius-sm)",backdropFilter:"blur(20px)",fontSize:"var(--g-text-xs)"}}),r&&e.jsx(E,{y:r,stroke:"var(--g-blue)",strokeDasharray:"5 5",strokeOpacity:.6,label:{value:`Min ${r} ${l("common.mbps")}`,position:"right",fill:"var(--g-blue)",fontSize:10}}),o&&e.jsx(E,{y:o,stroke:"var(--g-green)",strokeDasharray:"5 5",strokeOpacity:.6,label:{value:`Min ${o} ${l("common.mbps")}`,position:"right",fill:"var(--g-green)",fontSize:10}}),a&&e.jsxs(e.Fragment,{children:[e.jsx(N,{type:"monotone",dataKey:"dl_upper",stroke:"none",fill:"var(--g-blue)",fillOpacity:.08,connectNulls:!0,activeDot:!1,name:"DL Upper",isAnimationActive:!1}),e.jsx(N,{type:"monotone",dataKey:"dl_lower",stroke:"none",fill:"var(--g-bg, #fff)",fillOpacity:1,connectNulls:!0,activeDot:!1,name:"DL Lower",isAnimationActive:!1}),e.jsx(N,{type:"monotone",dataKey:"ul_upper",stroke:"none",fill:"var(--g-green)",fillOpacity:.08,connectNulls:!0,activeDot:!1,name:"UL Upper",isAnimationActive:!1}),e.jsx(N,{type:"monotone",dataKey:"ul_lower",stroke:"none",fill:"var(--g-bg, #fff)",fillOpacity:1,connectNulls:!0,activeDot:!1,name:"UL Lower",isAnimationActive:!1})]}),e.jsx(N,{type:"monotone",dataKey:"download",stroke:"var(--g-blue)",fill:"url(#dlGrad)",strokeWidth:2,name:l("common.download"),animationDuration:1e3,animationBegin:0,animationEasing:"ease-out",connectNulls:!1}),e.jsx(N,{type:"monotone",dataKey:"upload",stroke:"var(--g-green)",fill:"url(#ulGrad)",strokeWidth:2,name:l("common.upload"),animationDuration:1e3,animationBegin:200,animationEasing:"ease-out",connectNulls:!1}),e.jsx(Q,{type:"monotone",dataKey:"pred_download",stroke:"var(--g-blue)",strokeWidth:2,strokeDasharray:"6 4",dot:!1,name:`${l("docs.down")} ${l("docs.forecastDays").split(" ")[0]}`,animationDuration:800,animationBegin:400,connectNulls:!0}),e.jsx(Q,{type:"monotone",dataKey:"pred_upload",stroke:"var(--g-green)",strokeWidth:2,strokeDasharray:"6 4",dot:!1,name:`${l("docs.up")} ${l("docs.forecastDays").split(" ")[0]}`,animationDuration:800,animationBegin:600,connectNulls:!0})]})}),(a==null?void 0:a.seasonal_factors)&&a.seasonal_factors.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t",style:{borderColor:"var(--g-border)"},children:[e.jsxs("span",{className:"text-[10px] shrink-0",style:{color:"var(--g-text-tertiary)"},children:[l("docs.dayPatterns"),":"]}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto scrollbar-hide",children:a.seasonal_factors.map(i=>{const g=i.download_factor,v=g>=1.02?"var(--g-green)":g<=.98?"var(--g-red)":"var(--g-text-tertiary)";return e.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded shrink-0",style:{color:v,background:`${v}10`},title:`${i.day_name}: DL ${(g*100-100).toFixed(1)}%`,children:i.day_name.slice(0,3)},i.day)})})]})]})}function Ee({sla:s}){const{t}=h();return e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("statistics.slaCompliance")}),e.jsxs("div",{className:"flex justify-around",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs(F,{value:s.download_compliance_pct,size:90,strokeWidth:6,color:"var(--g-blue)",children:[e.jsx(y,{value:s.download_compliance_pct,decimals:0,className:"text-sm font-bold",style:{color:"var(--g-blue)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-blue)"},children:t("common.pct")})]}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:t("common.download")}),e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:"var(--g-text-tertiary)"},children:[s.download_compliant,"/",s.total_tests]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs(F,{value:s.upload_compliance_pct,size:90,strokeWidth:6,color:"var(--g-green)",children:[e.jsx(y,{value:s.upload_compliance_pct,decimals:0,className:"text-sm font-bold",style:{color:"var(--g-green)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-green)"},children:t("common.pct")})]}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:t("common.upload")}),e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:"var(--g-text-tertiary)"},children:[s.upload_compliant,"/",s.total_tests]})]})]})]})}function Qe({reliability:s}){const{t}=h(),a=s.composite_score,r=a>=80?"var(--g-green)":a>=50?"var(--g-orange)":"var(--g-red)";return e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("statistics.reliabilityScore")}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(F,{value:a,size:110,strokeWidth:8,color:r,children:e.jsx(y,{value:a,decimals:0,className:"text-2xl font-bold",style:{color:r}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center w-full mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:"DL CV"}),e.jsx(y,{value:s.download_cv*100,decimals:1,className:"text-sm font-medium",style:{color:"var(--g-text)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:t("common.pct")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:"UL CV"}),e.jsx(y,{value:s.upload_cv*100,decimals:1,className:"text-sm font-medium",style:{color:"var(--g-text)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:t("common.pct")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:"Ping CV"}),e.jsx(y,{value:s.ping_cv*100,decimals:1,className:"text-sm font-medium",style:{color:"var(--g-text)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:t("common.pct")})]})]})]})]})}function Xe({servers:s}){const{t}=h();if(s.length===0)return null;const a=s.map(r=>({name:r.server_name.length>15?r.server_name.slice(0,15)+"...":r.server_name,download:r.avg_download_mbps,upload:r.avg_upload_mbps,tests:r.test_count}));return e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("statistics.serverComparison")}),e.jsx($,{width:"100%",height:300,children:e.jsxs(U,{data:a,children:[e.jsx(A,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(z,{dataKey:"name",tick:{fontSize:10},stroke:"var(--g-text-tertiary)"}),e.jsx(K,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)",unit:` ${t("common.mbps")}`}),e.jsx(D,{}),e.jsx(re,{}),e.jsx(k,{dataKey:"download",fill:"var(--g-blue)",name:t("common.download"),radius:[4,4,0,0]}),e.jsx(k,{dataKey:"upload",fill:"var(--g-green)",name:t("common.upload"),radius:[4,4,0,0]})]})})]})}const Ye={ethernet:e.jsx(ke,{className:"w-5 h-5"}),wifi:e.jsx(oe,{className:"w-5 h-5"}),vpn:e.jsx(le,{className:"w-5 h-5"}),unknown:e.jsx(Fe,{className:"w-5 h-5"})},Ze={ethernet:"var(--g-blue)",wifi:"var(--g-green)",vpn:"var(--g-purple)",unknown:"var(--g-text-tertiary)"};function Je({comparison:s}){const{t}=h(),a={ethernet:t("latestResult.ethernet"),wifi:t("latestResult.wifi"),vpn:t("latestResult.vpn"),unknown:t("latestResult.unknown")};if(!s||s.types.length===0)return null;const r=s.types.map(l=>({name:a[l.connection_type]||l.connection_type,download:Math.round(l.avg_download_mbps*10)/10,upload:Math.round(l.avg_upload_mbps*10)/10,ping:Math.round(l.avg_ping_ms*10)/10,tests:l.test_count})),o=l=>{switch(l){case"download":return e.jsx(De,{className:"w-4 h-4"});case"upload":return e.jsx(Se,{className:"w-4 h-4"});case"latency":return e.jsx(ie,{className:"w-4 h-4"});default:return e.jsx(Ge,{className:"w-4 h-4"})}};return e.jsxs(u,{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("docs.connectionTypeComparison")}),e.jsx("div",{className:"mb-6",children:e.jsx($,{width:"100%",height:250,children:e.jsxs(U,{data:r,children:[e.jsx(A,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(z,{dataKey:"name",tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(K,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(D,{contentStyle:{background:"var(--g-card-bg)",border:"1px solid var(--g-border)",borderRadius:"8px"}}),e.jsx(re,{}),e.jsx(k,{dataKey:"download",fill:"var(--g-blue)",name:`${t("common.download")} (${t("common.mbps")})`,radius:[4,4,0,0]}),e.jsx(k,{dataKey:"upload",fill:"var(--g-green)",name:`${t("common.upload")} (${t("common.mbps")})`,radius:[4,4,0,0]})]})})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:s.types.map(l=>e.jsxs("div",{className:"p-3 rounded-lg",style:{background:"var(--g-glass-bg)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{style:{color:Ze[l.connection_type]},children:Ye[l.connection_type]}),e.jsx("span",{className:"text-sm font-medium",children:a[l.connection_type]||l.connection_type}),e.jsxs("span",{className:"text-xs ml-auto",style:{color:"var(--g-text-tertiary)"},children:[l.test_count," ",t("docs.tests")]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--g-text-tertiary)"},children:t("docs.down")}),e.jsx("div",{className:"font-medium",children:l.avg_download_mbps.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--g-text-tertiary)"},children:t("docs.up")}),e.jsx("div",{className:"font-medium",children:l.avg_upload_mbps.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--g-text-tertiary)"},children:t("common.ping")}),e.jsx("div",{className:"font-medium",children:l.avg_ping_ms.toFixed(1)})]})]})]},l.connection_type))}),e.jsxs("div",{className:"p-3 rounded-lg",style:{background:"var(--g-blue-tint)"},children:[e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o("download"),e.jsxs("span",{style:{color:"var(--g-text-secondary)"},children:[t("docs.bestDownload"),":"]}),e.jsx("span",{className:"font-medium",children:a[s.best_for_download]||s.best_for_download})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o("upload"),e.jsxs("span",{style:{color:"var(--g-text-secondary)"},children:[t("docs.bestUpload"),":"]}),e.jsx("span",{className:"font-medium",children:a[s.best_for_upload]||s.best_for_upload})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o("latency"),e.jsxs("span",{style:{color:"var(--g-text-secondary)"},children:[t("docs.bestLatency"),":"]}),e.jsx("span",{className:"font-medium",children:a[s.best_for_latency]||s.best_for_latency})]})]}),s.recommendation&&e.jsxs("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:[e.jsxs("strong",{children:[t("docs.recommendation"),":"]})," ",s.recommendation]})]})]})}const Pe={"A+":"var(--g-green)",A:"var(--g-green)",B:"var(--g-teal)",C:"var(--g-orange)",D:"var(--g-red)",F:"var(--g-red)"};function M({label:s,value:t,color:a}){const r=ae(t,800);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs w-24 text-right shrink-0",style:{color:"var(--g-text-secondary)"},children:s}),e.jsx("div",{className:"flex-1 h-2 rounded-full",style:{background:"var(--g-border)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${Math.min(100,r)}%`,background:a,boxShadow:`0 0 8px ${a}40`}})}),e.jsx("span",{className:"text-xs tabular-nums w-10",style:{color:"var(--g-text-secondary)"},children:r.toFixed(0)})]})}function Z({score:s}){const{t}=h(),a=Pe[s.grade]||"var(--g-blue)",r=ae(s.composite,1e3);return e.jsxs(u,{padding:"lg",depth:"elevated",className:"g-animate-in",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(le,{className:"w-4 h-4",style:{color:a}}),e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--g-text)"},children:t("statistics.ispScore")})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(F,{value:s.composite,max:100,size:120,strokeWidth:6,color:a,glow:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-3xl font-bold tabular-nums",style:{color:a,textShadow:`0 0 16px ${a}30`},children:r.toFixed(0)}),e.jsx("span",{className:"text-xs block",style:{color:"var(--g-text-secondary)"},children:"/ 100"})]})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl font-bold",style:{color:a,textShadow:`0 0 12px ${a}30`},children:s.grade}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-tertiary)"},children:t("statistics.ispGrade")})]}),e.jsx(M,{label:t("connectionHealth.speed"),value:s.breakdown.speed_score,color:"var(--g-blue)"}),e.jsx(M,{label:t("connectionHealth.latency"),value:s.breakdown.latency_score,color:"var(--g-orange)"}),e.jsx(M,{label:t("connectionHealth.reliability"),value:s.breakdown.reliability_score,color:"var(--g-green)"}),e.jsx(M,{label:t("connectionHealth.consistency"),value:s.breakdown.consistency_score,color:"var(--g-teal)"})]})]})]})}function R({icon:s,label:t,hours:a,download:r,upload:o,ping:l,count:c,isBest:d,isWorst:x}){const{t:n}=h(),i=d?"var(--g-green)":x?"var(--g-red)":"var(--g-border)";return e.jsxs(u,{padding:"md",className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-xl pointer-events-none",style:{border:d||x?`1px solid ${i}`:void 0,boxShadow:d?`0 0 12px ${i}20`:x?`0 0 12px ${i}20`:void 0}}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(s,{className:"w-4 h-4",style:{color:"var(--g-text-secondary)"}}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--g-text)"},children:t}),e.jsx("span",{className:"text-[10px] ml-auto",style:{color:"var(--g-text-tertiary)"},children:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs flex items-center gap-1",style:{color:"var(--g-text-secondary)"},children:[e.jsx(q,{className:"w-3 h-3",style:{color:"var(--g-blue)"}})," ",n("common.download")]}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",style:{color:"var(--g-blue)"},children:[r.toFixed(1)," ",n("common.mbps")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs flex items-center gap-1",style:{color:"var(--g-text-secondary)"},children:[e.jsx(Ne,{className:"w-3 h-3",style:{color:"var(--g-green)"}})," ",n("common.upload")]}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",style:{color:"var(--g-green)"},children:[o.toFixed(1)," ",n("common.mbps")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs flex items-center gap-1",style:{color:"var(--g-text-secondary)"},children:[e.jsx(w,{className:"w-3 h-3",style:{color:"var(--g-orange)"}})," ",n("common.ping")]}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",style:{color:"var(--g-orange)"},children:[l.toFixed(1)," ",n("common.ms")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2",style:{borderTop:"1px solid var(--g-border)"},children:[e.jsxs("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:[c," tests"]}),d&&e.jsx(H,{color:"var(--g-green)",children:"Best"}),x&&e.jsx(H,{color:"var(--g-red)",children:"Worst"})]})]})}function S({label:s,time:t,value:a,unit:r,color:o,icon:l}){return e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg",style:{background:`${o}08`},children:[e.jsx(l,{className:"w-3.5 h-3.5",style:{color:o}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs block",style:{color:"var(--g-text-secondary)"},children:s}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:t})]}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",style:{color:o},children:[a.toFixed(1)," ",r]})]})}function J({peakOffPeak:s,bestWorstTimes:t}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{icon:O,label:s.peak.label,hours:s.peak.hours,download:s.peak.avg_download_mbps,upload:s.peak.avg_upload_mbps,ping:s.peak.avg_ping_ms,count:s.peak.count,isBest:s.best_period==="Peak",isWorst:s.worst_period==="Peak"}),e.jsx(R,{icon:He,label:s.offpeak.label,hours:s.offpeak.hours,download:s.offpeak.avg_download_mbps,upload:s.offpeak.avg_upload_mbps,ping:s.offpeak.avg_ping_ms,count:s.offpeak.count,isBest:s.best_period==="Off-Peak",isWorst:s.worst_period==="Off-Peak"}),e.jsx(R,{icon:se,label:s.night.label,hours:s.night.hours,download:s.night.avg_download_mbps,upload:s.night.avg_upload_mbps,ping:s.night.avg_ping_ms,count:s.night.count,isBest:s.best_period==="Night",isWorst:s.worst_period==="Night"})]}),t&&e.jsxs(u,{padding:"md",className:"g-animate-in g-stagger-1",children:[e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--g-text-tertiary)"},children:"Best / Worst Hours"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[t.best_download&&e.jsx(S,{label:"Best Download",time:t.best_download.label,value:t.best_download.avg_download_mbps,unit:"Mbps",color:"var(--g-blue)",icon:q}),t.worst_download&&e.jsx(S,{label:"Worst Download",time:t.worst_download.label,value:t.worst_download.avg_download_mbps,unit:"Mbps",color:"var(--g-red)",icon:q}),t.best_ping&&e.jsx(S,{label:"Best Ping",time:t.best_ping.label,value:t.best_ping.avg_ping_ms,unit:"ms",color:"var(--g-green)",icon:w}),t.worst_ping&&e.jsx(S,{label:"Worst Ping",time:t.worst_ping.label,value:t.worst_ping.avg_ping_ms,unit:"ms",color:"var(--g-red)",icon:w})]})]})]})}const es={morning:Te,midday:O,afternoon:ze,evening:se,night:Le},ss={morning:"var(--g-orange)",midday:"var(--g-yellow)",afternoon:"var(--g-blue)",evening:"var(--g-purple)",night:"var(--g-text-tertiary)"};function P(s){return s>=95?"var(--g-green)":s>=80?"var(--g-yellow)":"var(--g-red)"}function ts({data:s}){const{t}=h();return e.jsxs(u,{children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("docs.timeOfDayAnalysis")}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:s.periods.map(a=>{const r=es[a.period]||O,o=a.period===s.best_period,l=a.period===s.worst_period&&s.best_period!==s.worst_period,c=a.test_count>0;return e.jsxs("div",{className:"relative p-3 rounded-lg transition-all",style:{background:o?"var(--g-green)12":l?"var(--g-red)08":"var(--g-glass)",border:o?"1px solid var(--g-green)":l?"1px solid var(--g-red)":"1px solid var(--g-border)"},children:[o&&e.jsx("span",{className:"absolute -top-2 -right-2 text-[10px] px-1.5 py-0.5 rounded-full",style:{background:"var(--g-green)",color:"white"},children:t("docs.best")}),l&&e.jsx("span",{className:"absolute -top-2 -right-2 text-[10px] px-1.5 py-0.5 rounded-full",style:{background:"var(--g-red)",color:"white"},children:t("docs.worst")}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(r,{className:"w-4 h-4",style:{color:ss[a.period]}}),e.jsx("span",{className:"text-xs font-medium truncate",style:{color:"var(--g-text)"},children:a.period_label.split(" ")[0]})]}),e.jsx("div",{className:"text-[10px] mb-2",style:{color:"var(--g-text-tertiary)"},children:a.hours}),c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{style:{color:"var(--g-text-secondary)"},children:t("docs.down")}),e.jsxs("span",{className:"font-medium",style:{color:"var(--g-blue)"},children:[a.avg_download_mbps.toFixed(0)," ",t("common.mbps")]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{style:{color:"var(--g-text-secondary)"},children:t("docs.up")}),e.jsxs("span",{className:"font-medium",style:{color:"var(--g-green)"},children:[a.avg_upload_mbps.toFixed(0)," ",t("common.mbps")]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{style:{color:"var(--g-text-secondary)"},children:t("common.ping")}),e.jsxs("span",{className:"font-medium",style:{color:"var(--g-orange)"},children:[a.avg_ping_ms.toFixed(1)," ",t("common.ms")]})]})]}),e.jsxs("div",{className:"text-center py-1 rounded text-xs font-medium",style:{background:`${P(a.compliance_pct)}15`,color:P(a.compliance_pct)},children:[a.compliance_pct.toFixed(0),"% OK"]}),e.jsxs("div",{className:"text-center text-[10px] mt-1",style:{color:"var(--g-text-tertiary)"},children:[a.test_count," ",t("docs.tests")]})]}):e.jsx("div",{className:"text-center text-xs py-4",style:{color:"var(--g-text-tertiary)"},children:t("common.noData")})]},a.period)})})]})}function as(s,t,a){if(a===0)return"var(--g-border)";const r=s/t;return r>=.9?"var(--g-green)":r>=.7?"var(--g-teal)":r>=.5?"var(--g-orange)":"var(--g-red)"}function rs(s,t,a,r){if(a===0)return r("common.noData");const o=s/t;return o>=.9?r("docs.excellent"):o>=.7?r("docs.good"):o>=.5?r("docs.fair"):r("docs.poor")}function ls({data:s,downloadThreshold:t}){const{t:a}=h();return e.jsxs(u,{padding:"md",className:"g-animate-in",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:a("docs.qualityTimeline")}),e.jsx("div",{className:"flex gap-0.5",children:s.map(r=>{const o=as(r.avg_download_mbps,t,r.count),l=rs(r.avg_download_mbps,t,r.count,a);return e.jsxs("div",{className:"flex-1 group relative",children:[e.jsx("div",{className:"h-8 rounded-sm transition-all duration-300 hover:scale-y-125 hover:brightness-110 cursor-default",style:{background:o,opacity:r.count===0?.2:.7+Math.min(.3,r.count*.05)}}),e.jsx("span",{className:"text-[8px] block text-center mt-1 tabular-nums",style:{color:"var(--g-text-tertiary)"},children:r.hour.toString().padStart(2,"0")}),e.jsxs("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1.5 rounded-lg
                           opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 whitespace-nowrap`,style:{background:"var(--g-glass-bg)",backdropFilter:"blur(12px)",border:"1px solid var(--g-border)",boxShadow:"var(--g-shadow-elevated)"},children:[e.jsxs("div",{className:"text-[10px] font-medium",style:{color:"var(--g-text)"},children:[r.hour.toString().padStart(2,"0"),":00 - ",l]}),r.count>0&&e.jsxs("div",{className:"text-[9px] mt-0.5",style:{color:"var(--g-text-secondary)"},children:[r.avg_download_mbps.toFixed(0)," ",a("common.mbps")," / ",r.avg_ping_ms.toFixed(0)," ",a("common.ms")," / ",r.count," ",a("docs.tests")]})]})]},r.hour)})}),e.jsx("div",{className:"flex items-center gap-4 mt-3 pt-2",style:{borderTop:"1px solid var(--g-border)"},children:[{labelKey:"docs.excellent",color:"var(--g-green)"},{labelKey:"docs.good",color:"var(--g-teal)"},{labelKey:"docs.fair",color:"var(--g-orange)"},{labelKey:"docs.poor",color:"var(--g-red)"}].map(r=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm",style:{background:r.color,opacity:.8}}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:a(r.labelKey)})]},r.labelKey))})]})}function os(s){const t=Math.abs(s);return s>0?t>.7?"var(--g-blue)":t>.4?"var(--g-teal)":"var(--g-text-tertiary)":t>.7?"var(--g-red)":t>.4?"var(--g-orange)":"var(--g-text-tertiary)"}function ns(s){return .15+Math.abs(s)*.6}function cs({data:s}){const{t}=h(),{metrics:a,pairs:r}=s,o={download:t("common.download"),upload:t("common.upload"),ping:t("common.ping"),jitter:t("history.jitter")},l=new Map;for(const c of r)l.set(`${c.metric_a}-${c.metric_b}`,c.coefficient),l.set(`${c.metric_b}-${c.metric_a}`,c.coefficient);return e.jsxs(u,{padding:"md",className:"g-animate-in",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("docs.metricCorrelations")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2"}),a.map(c=>e.jsx("th",{className:"p-2 text-[10px] font-medium uppercase tracking-wider text-center",style:{color:"var(--g-text-secondary)"},children:o[c]||c},c))]})}),e.jsx("tbody",{children:a.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 text-[10px] font-medium uppercase tracking-wider text-right",style:{color:"var(--g-text-secondary)"},children:o[c]||c}),a.map(d=>{if(c===d)return e.jsx("td",{className:"p-1",children:e.jsx("div",{className:"w-full aspect-square rounded-md flex items-center justify-center",style:{background:"var(--g-border)",opacity:.5},children:e.jsx("span",{className:"text-[10px] tabular-nums font-medium",style:{color:"var(--g-text-secondary)"},children:"1.00"})})},d);const x=l.get(`${c}-${d}`)??0,n=os(x),i=ns(x);return e.jsx("td",{className:"p-1",children:e.jsx("div",{className:"w-full aspect-square rounded-md flex items-center justify-center transition-all duration-300 hover:scale-105 cursor-default",style:{background:n,opacity:i},children:e.jsx("span",{className:"text-[10px] tabular-nums font-semibold",style:{color:"var(--g-text)"},children:x.toFixed(2)})})},d)})]},c))})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3 pt-2",style:{borderTop:"1px solid var(--g-border)"},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{background:"var(--g-blue)",opacity:.6}}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:t("docs.strongPositive")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{background:"var(--g-text-tertiary)",opacity:.3}}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:t("docs.weak")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{background:"var(--g-red)",opacity:.6}}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:t("docs.strongNegative")})]})]})]})}const ee={critical:{icon:te,color:"var(--g-red)",labelKey:"rootCause.critical"},warning:{icon:_e,color:"var(--g-orange)",labelKey:"rootCause.warning"},info:{icon:de,color:"var(--g-teal)",labelKey:"rootCause.info"}};function is({alerts:s}){const{t}=h(),a={download_mbps:t("qos.downloadSpeed"),upload_mbps:t("qos.uploadSpeed"),ping_ms:t("qos.pingLatency")};return s.length===0?null:e.jsx("div",{className:"space-y-2 g-animate-in",children:s.map((r,o)=>{const l=ee[r.severity]||ee.info,c=l.icon;return e.jsxs(u,{padding:"sm",className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-l-xl",style:{background:l.color}}),e.jsxs("div",{className:"flex items-start gap-3 pl-3",children:[e.jsx(c,{className:"w-4 h-4 shrink-0 mt-0.5",style:{color:l.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--g-text)"},children:a[r.metric]||r.metric}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{background:`${l.color}15`,color:l.color},children:t(l.labelKey)})]}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--g-text-secondary)"},children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:"var(--g-text-tertiary)"},children:[t("docs.currentValue"),": ",r.current_avg.toFixed(1)]}),e.jsxs("span",{className:"text-[10px] tabular-nums",style:{color:"var(--g-text-tertiary)"},children:[t("docs.historicalValue"),": ",r.historical_avg.toFixed(1)]}),e.jsxs("span",{className:"text-[10px] font-semibold tabular-nums",style:{color:l.color},children:["-",r.drop_pct.toFixed(1),"%"]})]})]})]})]},`${r.metric}-${o}`)})})}function G(s){if(s===null||s===0)return"-";if(s<60)return`${Math.round(s)}s`;if(s<3600)return`${Math.round(s/60)}m`;const t=Math.floor(s/3600),a=Math.round(s%3600/60);return`${t}h ${a}m`}function V(s){return new Date(s).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function C({icon:s,label:t,value:a,subValue:r,color:o}){return e.jsxs("div",{className:"glass-card p-4 flex items-center gap-4",style:{borderLeft:`3px solid ${o}`},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0",style:{background:`${o}15`},children:e.jsx(s,{className:"w-5 h-5",style:{color:o}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--g-text)"},children:a}),e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:t}),r&&e.jsx("p",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:r})]})]})}function ds({outages:s}){const{t}=h();return s.length===0?e.jsxs("div",{className:"glass-card p-8 text-center",style:{color:"var(--g-text-secondary)"},children:[e.jsx(oe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:t("docs.noOutagesRecorded")}),e.jsx("p",{className:"text-sm mt-1",children:t("docs.connectionStable")})]}):e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:t("docs.outageHistory")}),e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{background:a.is_active?"var(--g-red-tint)":"var(--g-surface)",borderLeft:`3px solid ${a.is_active?"var(--g-red)":"var(--g-orange)"}`},children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0 mt-0.5",style:{background:a.is_active?"var(--g-red)":"var(--g-orange)"},children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-medium text-sm",style:{color:"var(--g-text)"},children:a.is_active?t("docs.activeOutage"):t("docs.resolvedOutage")}),a.is_active&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-medium",style:{background:"var(--g-red)",color:"white"},children:t("docs.activeOutage").toUpperCase()})]}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--g-text-secondary)"},children:[t("docs.started"),": ",V(a.started_at)]}),a.ended_at&&e.jsxs("p",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:[t("docs.ended"),": ",V(a.ended_at)]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"text-xs flex items-center gap-1",style:{color:"var(--g-text-tertiary)"},children:[e.jsx(w,{className:"w-3 h-3"}),G(a.duration_seconds)]}),e.jsxs("span",{className:"text-xs",style:{color:"var(--g-text-tertiary)"},children:[a.failure_count," ",t("docs.failedTests")]})]}),a.trigger_error&&e.jsx("p",{className:"text-[10px] mt-2 truncate",style:{color:"var(--g-red)"},title:a.trigger_error,children:a.trigger_error})]})]},a.id))})]})}function ms({startDate:s,endDate:t}){const{t:a}=h(),r={start_date:s,end_date:t},{data:o}=me(r),{data:l}=xe(r),c=(o==null?void 0:o.items)??[],d=c.find(x=>x.is_active);return e.jsxs("div",{className:"space-y-4",children:[d&&e.jsxs("div",{className:"glass-card p-4 flex items-center gap-4",style:{background:"var(--g-red-tint)",border:"1px solid var(--g-red)"},children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center animate-pulse",style:{background:"var(--g-red)"},children:e.jsx(ce,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",style:{color:"var(--g-red)"},children:a("docs.outageInProgress")}),e.jsxs("p",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:[a("docs.started")," ",V(d.started_at)," -"," ",d.failure_count," ",a("docs.consecutiveFailures")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(C,{icon:te,label:a("docs.totalOutages"),value:(l==null?void 0:l.total_outages)??0,color:"var(--g-red)"}),e.jsx(C,{icon:ne,label:a("docs.uptime"),value:`${((l==null?void 0:l.uptime_pct)??100).toFixed(1)}%`,subValue:a("docs.ofMonitoredPeriod"),color:"var(--g-green)"}),e.jsx(C,{icon:w,label:a("docs.avgDuration"),value:G((l==null?void 0:l.avg_duration_seconds)??0),color:"var(--g-orange)"}),e.jsx(C,{icon:w,label:a("docs.longestOutage"),value:G((l==null?void 0:l.longest_outage_seconds)??0),color:"var(--g-red)"})]}),e.jsx(ds,{outages:c})]})}function Ds(){const{t:s}=h(),[t,a]=_.useState("overview"),[r,o]=_.useState(""),[l,c]=_.useState(""),d=[{key:"overview",label:s("statistics.overview")},{key:"time",label:s("statistics.timeAnalysis")},{key:"trends",label:s("statistics.trends")},{key:"insights",label:s("statistics.insights")},{key:"servers",label:s("statistics.servers")},{key:"outages",label:s("statistics.outages")}],x={start_date:r?new Date(r).toISOString():void 0,end_date:l?new Date(l).toISOString():void 0},{data:n,isLoading:i}=ge(x),{data:g}=pe({page_size:100,...x}),v=_.useCallback((m,f)=>{var I;let b=f;if(m.key==="ArrowRight")b=(f+1)%d.length;else if(m.key==="ArrowLeft")b=(f-1+d.length)%d.length;else if(m.key==="Home")b=0;else if(m.key==="End")b=d.length-1;else return;m.preventDefault(),a(d[b].key),(I=document.querySelectorAll('[role="tab"]')[b])==null||I.focus()},[]);if(i)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(ue,{size:32})});if(!n)return null;const p=n.basic;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between g-animate-in",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(ne,{className:"w-5 h-5"}),s("statistics.title")]}),e.jsx(he,{startDate:r,endDate:l,onStartDateChange:o,onEndDateChange:c})]}),n.degradation_alerts.length>0&&e.jsx(is,{alerts:n.degradation_alerts}),e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide snap-x pb-1 -mb-1 g-animate-in g-stagger-1",role:"tablist","aria-label":"Statistics sections",children:d.map((m,f)=>e.jsx(ve,{size:"sm",variant:t===m.key?"primary":"default",onClick:()=>a(m.key),onKeyDown:b=>v(b,f),role:"tab","aria-selected":t===m.key,"aria-controls":`tabpanel-${m.key}`,id:`tab-${m.key}`,tabIndex:t===m.key?0:-1,className:"snap-start shrink-0",children:m.label},m.key))}),e.jsxs("div",{className:"g-animate-in g-stagger-2",children:[t==="overview"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel",id:"tabpanel-overview","aria-labelledby":"tab-overview",children:[n.isp_score&&e.jsx(Z,{score:n.isp_score}),e.jsx(Oe,{stats:p}),p.download&&e.jsx(B,{label:"Download",stat:p.download,unit:"Mbps",color:"var(--g-blue)"}),p.upload&&e.jsx(B,{label:"Upload",stat:p.upload,unit:"Mbps",color:"var(--g-green)"}),p.ping&&e.jsx(B,{label:"Ping",stat:p.ping,unit:"ms",color:"var(--g-orange)"}),g&&g.items.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(T,{measurements:g.items,field:"download_mbps",label:"Download",unit:"Mbps",color:"var(--g-blue)"}),e.jsx(T,{measurements:g.items,field:"upload_mbps",label:"Upload",unit:"Mbps",color:"var(--g-green)"}),e.jsx(T,{measurements:g.items,field:"ping_latency_ms",label:"Ping",unit:"ms",color:"var(--g-orange)"})]})]}),t==="time"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel",id:"tabpanel-time","aria-labelledby":"tab-time",children:[n.time_periods&&e.jsx(ts,{data:n.time_periods}),e.jsx(ls,{data:n.hourly,downloadThreshold:p.download_threshold_mbps}),n.peak_offpeak&&e.jsx(J,{peakOffPeak:n.peak_offpeak,bestWorstTimes:n.best_worst_times}),e.jsx(Ue,{data:n.hourly}),e.jsx(Ie,{data:n.daily})]}),t==="trends"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel",id:"tabpanel-trends","aria-labelledby":"tab-trends",children:[e.jsx(We,{trend:n.trend,predictions:n.predictions,enhancedPredictions:n.enhanced_predictions,downloadThreshold:p.effective_download_threshold_mbps,uploadThreshold:p.effective_upload_threshold_mbps}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Ee,{sla:n.sla}),e.jsx(Qe,{reliability:n.reliability})]})]}),t==="insights"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel",id:"tabpanel-insights","aria-labelledby":"tab-insights",children:[n.isp_score&&e.jsx(Z,{score:n.isp_score}),n.correlations&&e.jsx(cs,{data:n.correlations}),n.peak_offpeak&&e.jsx(J,{peakOffPeak:n.peak_offpeak,bestWorstTimes:n.best_worst_times}),n.anomalies.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--g-text)"},children:s("statistics.anomaliesDetected",{count:n.anomalies.length})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:n.anomalies.slice(0,12).map((m,f)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{background:"var(--g-red)08"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full shrink-0",style:{background:"var(--g-red)"}}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("span",{className:"text-xs font-medium block truncate",style:{color:"var(--g-text)"},children:[m.metric,": ",m.value," (z=",m.z_score,")"]}),e.jsxs("span",{className:"text-[10px]",style:{color:"var(--g-text-tertiary)"},children:["Mean: ",m.mean," / ",new Date(m.timestamp).toLocaleDateString()]})]})]},`${m.timestamp}-${m.metric}-${f}`))})]})]}),t==="servers"&&e.jsxs("div",{className:"space-y-4",role:"tabpanel",id:"tabpanel-servers","aria-labelledby":"tab-servers",children:[n.connection_comparison&&e.jsx(Je,{comparison:n.connection_comparison}),e.jsx(Xe,{servers:n.by_server})]}),t==="outages"&&e.jsx("div",{role:"tabpanel",id:"tabpanel-outages","aria-labelledby":"tab-outages",children:e.jsx(ms,{startDate:x.start_date,endDate:x.end_date})})]})]})}export{Ds as StatisticsPage};
