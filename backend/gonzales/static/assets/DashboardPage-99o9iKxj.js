import{a as h,j as e,b as Q}from"./query-CSQiZfg4.js";import{c as O,G as Z,u as ee,a as te,b as se,S as ae}from"./index-PEXXoraP.js";import{G as A}from"./GlassCard-BeFGED1K.js";import{A as re,u as K,P as I}from"./ProgressRing-YVr79DN4.js";import{f as ne,a as q}from"./format-Cx2mhIEl.js";import{R as U,L as X,C as Y,X as V,Y as H,T as J,a as oe,b as G}from"./charts-Cmp4m8N6.js";import{A as L}from"./activity-B533Ocpx.js";import{A as ie,a as le}from"./arrow-up-CNesBf9m.js";import"./vendor-PRsJgg41.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],de=O("gauge",ce);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ue=O("wifi",me);function xe(){const[t,s]=h.useState({phase:"idle"}),[r,n]=h.useState(!1),o=h.useRef(null),m=h.useCallback(()=>{o.current&&o.current.close(),s({phase:"idle"}),n(!0);const d=new EventSource("/api/v1/speedtest/stream");o.current=d,d.addEventListener("started",()=>{s({phase:"started"})}),d.addEventListener("progress",g=>{try{const a=JSON.parse(g.data);s({phase:a.phase||"started",bandwidth_mbps:a.bandwidth_mbps,progress:a.progress,ping_ms:a.ping_ms,elapsed:a.elapsed})}catch{}}),d.addEventListener("complete",g=>{try{const a=JSON.parse(g.data);s({phase:"complete",download_mbps:a.download_mbps,upload_mbps:a.upload_mbps,ping_ms:a.ping_ms,jitter_ms:a.jitter_ms,measurement_id:a.measurement_id})}catch{s({phase:"complete"})}n(!1),d.close(),o.current=null}),d.addEventListener("error",g=>{if(g instanceof MessageEvent)try{const a=JSON.parse(g.data);s({phase:"error",message:a.message})}catch{s({phase:"error",message:"Unknown error"})}else s({phase:"error",message:"Connection lost"});n(!1),d.close(),o.current=null}),d.onerror=()=>{o.current===d&&(n(!1),d.close(),o.current=null)}},[]),c=h.useCallback(()=>{o.current&&(o.current.close(),o.current=null),s({phase:"idle"}),n(!1)},[]);return{progress:t,isStreaming:r,startStreaming:m,reset:c}}function D({label:t,value:s,unit:r="Mbps",color:n,threshold:o}){const m=o!==void 0&&s<o;return e.jsxs(A,{hover:!0,className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium mb-1",style:{color:"var(--g-text-secondary)"},children:t}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx(re,{value:s,decimals:1,className:"text-5xl font-bold tracking-tight",style:{color:m?"var(--g-red)":n}}),e.jsx("span",{className:"text-lg font-medium",style:{color:"var(--g-text-secondary)"},children:r})]}),m&&e.jsxs("p",{className:"text-xs mt-2 font-medium",style:{color:"var(--g-red)"},children:["Below threshold (",o," ",r,")"]})]})}function pe({measurement:t}){return e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--g-text)"},children:"Latest Test"}),e.jsx("span",{className:"text-xs",style:{color:"var(--g-text-secondary)"},children:ne(t.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Server"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.server_name})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Location"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.server_location})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"ISP"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.isp})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Packet Loss"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.packet_loss_pct!==null?`${t.packet_loss_pct.toFixed(1)}%`:"N/A"})]})]}),t.result_url&&e.jsx("a",{href:t.result_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-3 text-xs hover:underline",style:{color:"var(--g-blue)"},children:"View on Speedtest.net"})]})}function he({measurements:t}){const s=[...t].reverse().map(r=>({time:q(r.timestamp),download:Number(r.download_mbps.toFixed(1)),upload:Number(r.upload_mbps.toFixed(1))}));return e.jsxs(A,{children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:"Speed Over Time"}),e.jsx(U,{width:"100%",height:300,children:e.jsxs(X,{data:s,children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(V,{dataKey:"time",tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(H,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)",unit:" Mbps"}),e.jsx(J,{contentStyle:{background:"var(--g-card-bg)",border:"1px solid var(--g-card-border)",borderRadius:"var(--g-radius-sm)",backdropFilter:"blur(20px)",fontSize:"var(--g-text-xs)"}}),e.jsx(oe,{}),e.jsx(G,{type:"monotone",dataKey:"download",stroke:"var(--g-blue)",strokeWidth:2,dot:!1,name:"Download",animationDuration:800,animationBegin:0,animationEasing:"ease-out"}),e.jsx(G,{type:"monotone",dataKey:"upload",stroke:"var(--g-green)",strokeWidth:2,dot:!1,name:"Upload",animationDuration:800,animationBegin:200,animationEasing:"ease-out"})]})})]})}function ge({measurements:t}){const s=[...t].reverse().map(r=>({time:q(r.timestamp),ping:Number(r.ping_latency_ms.toFixed(1)),jitter:Number(r.ping_jitter_ms.toFixed(1))}));return e.jsxs(A,{children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:"var(--g-text)"},children:"Latency Over Time"}),e.jsx(U,{width:"100%",height:250,children:e.jsxs(X,{data:s,children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:"var(--g-border)"}),e.jsx(V,{dataKey:"time",tick:{fontSize:11},stroke:"var(--g-text-tertiary)"}),e.jsx(H,{tick:{fontSize:11},stroke:"var(--g-text-tertiary)",unit:" ms"}),e.jsx(J,{contentStyle:{background:"var(--g-card-bg)",border:"1px solid var(--g-card-border)",borderRadius:"var(--g-radius-sm)",backdropFilter:"blur(20px)",fontSize:"var(--g-text-xs)"}}),e.jsx(G,{type:"monotone",dataKey:"ping",stroke:"var(--g-orange)",strokeWidth:2,dot:!1,name:"Ping",animationDuration:800,animationBegin:0,animationEasing:"ease-out"}),e.jsx(G,{type:"monotone",dataKey:"jitter",stroke:"var(--g-purple)",strokeWidth:2,dot:!1,name:"Jitter",animationDuration:800,animationBegin:200,animationEasing:"ease-out"})]})})]})}function fe(){const t=h.useRef([]),s=h.useRef(0),[r,n]=h.useState(0),o=h.useRef(0),m=h.useCallback((g,a)=>{t.current.push({time:a,value:g}),g>s.current&&(s.current=g);const l=performance.now();l-o.current>250&&(o.current=l,n(i=>i+1))},[]),c=h.useCallback(()=>{t.current=[],s.current=0,o.current=0,n(0)},[]),d=h.useCallback(()=>{n(g=>g+1)},[]);return{samples:t.current,peak:s.current,push:m,reset:c,flush:d,version:r}}function W({value:t,max:s=1e3,label:r="Speed",color:n="var(--g-blue)",unit:o="Mbps",glowColor:m}){const c=K(t,400),d=Math.min(c,s),g=-135+d/s*270,a=80,l=100,i=100,w=m||n,C=[0,.25,.5,.75,1].map(x=>{const u=(-135+x*270)*(Math.PI/180);return{x1:l+(a-10)*Math.cos(u),y1:i+(a-10)*Math.sin(u),x2:l+a*Math.cos(u),y2:i+a*Math.sin(u),label:Math.round(x*s),lx:l+(a-18)*Math.cos(u),ly:i+(a-18)*Math.sin(u)}}),b=Array.from({length:21},(x,u)=>{const _=u/20,P=(-135+_*270)*(Math.PI/180);return{x1:l+(a-4)*Math.cos(P),y1:i+(a-4)*Math.sin(P),x2:l+a*Math.cos(P),y2:i+a*Math.sin(P),active:_<=d/s}}),k=-135*(Math.PI/180),y=g*(Math.PI/180),v=l+a*Math.cos(k),f=i+a*Math.sin(k),p=l+a*Math.cos(y),j=i+a*Math.sin(y),S=g- -135>180?1:0,N=g*(Math.PI/180),$=l+(a-18)*Math.cos(N),F=i+(a-18)*Math.sin(N),R=l+(a-20)*Math.cos(N),M=i+(a-20)*Math.sin(N);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("svg",{viewBox:"0 0 200 145",className:"w-full max-w-[320px]",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"needleGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),e.jsx("feFlood",{floodColor:w,floodOpacity:"0.6",result:"color"}),e.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"arcGlow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),e.jsx("feFlood",{floodColor:w,floodOpacity:"0.4",result:"color"}),e.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("filter",{id:"tipPulse",x:"-100%",y:"-100%",width:"300%",height:"300%",children:e.jsx("feGaussianBlur",{stdDeviation:"4"})}),e.jsxs("linearGradient",{id:"arcGradient",x1:"0",y1:"0",x2:"1",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:n,stopOpacity:"1"})]})]}),e.jsx("path",{d:`M ${l+a*Math.cos(k)} ${i+a*Math.sin(k)} A ${a} ${a} 0 1 1 ${l+a*Math.cos(135*Math.PI/180)} ${i+a*Math.sin(135*Math.PI/180)}`,fill:"none",stroke:"var(--g-border)",strokeWidth:"6",strokeLinecap:"round",opacity:"0.5"}),c>0&&e.jsx("path",{d:`M ${l+a*Math.cos(k)} ${i+a*Math.sin(k)} A ${a} ${a} 0 1 1 ${l+a*Math.cos(135*Math.PI/180)} ${i+a*Math.sin(135*Math.PI/180)}`,fill:"none",stroke:n,strokeWidth:"8",strokeLinecap:"round",filter:"url(#arcGlow)",children:e.jsx("animate",{attributeName:"opacity",values:"0.05;0.15;0.05",dur:"3s",repeatCount:"indefinite"})}),b.map((x,u)=>e.jsx("line",{x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,stroke:x.active?n:"var(--g-border)",strokeWidth:"1",strokeLinecap:"round",opacity:x.active?.8:.3},`minor-${u}`)),c>0&&e.jsx("path",{d:`M ${v} ${f} A ${a} ${a} 0 ${S} 1 ${p} ${j}`,fill:"none",stroke:"url(#arcGradient)",strokeWidth:"6",strokeLinecap:"round",filter:"url(#arcGlow)"}),C.map((x,u)=>e.jsxs("g",{children:[e.jsx("line",{x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,stroke:"var(--g-text-tertiary)",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("text",{x:x.lx,y:x.ly,textAnchor:"middle",dominantBaseline:"middle",fill:"var(--g-text-secondary)",fontSize:"7",fontWeight:"500",children:x.label})]},`major-${u}`)),e.jsx("line",{x1:l,y1:i,x2:$,y2:F,stroke:n,strokeWidth:"2",strokeLinecap:"round",filter:"url(#needleGlow)"}),e.jsx("circle",{cx:l,cy:i,r:"5",fill:n,opacity:"0.9"}),e.jsx("circle",{cx:l,cy:i,r:"3",fill:"var(--g-bg)"}),c>0&&e.jsxs("circle",{cx:R,cy:M,r:"6",fill:n,filter:"url(#tipPulse)",opacity:"0.5",children:[e.jsx("animate",{attributeName:"opacity",values:"0.3;0.7;0.3",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"r",values:"4;8;4",dur:"1.5s",repeatCount:"indefinite"})]})]}),e.jsxs("div",{className:"text-center -mt-3",children:[e.jsx("span",{className:"text-5xl font-bold tabular-nums g-number-glow-pulse",style:{color:n,"--glow-color":`${w}60`,textShadow:`0 0 20px ${w}40, 0 0 40px ${w}20`},children:c.toFixed(1)}),e.jsx("span",{className:"text-sm ml-1",style:{color:"var(--g-text-secondary)"},children:o})]}),e.jsx("span",{className:"text-xs mt-1 font-medium uppercase tracking-wider",style:{color:"var(--g-text-tertiary)"},children:r})]})}function E(t){return t.includes("--g-blue")||t==="#007AFF"?[0,122,255]:t.includes("--g-green")||t==="#34C759"?[52,199,89]:t.includes("--g-teal")?[0,199,190]:t.includes("--g-orange")?[255,149,0]:t.startsWith("#")&&t.length===7?[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)]:[0,122,255]}function T({direction:t,bandwidth:s,color:r}){const n=h.useRef(null),o=h.useRef([]),m=h.useRef(0),c=h.useRef({w:0,h:0}),d=h.useRef({direction:t,bandwidth:s,color:r});d.current={direction:t,bandwidth:s,color:r};const g=typeof window<"u"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=h.useCallback((l,i,w)=>{const C=d.current.bandwidth,b=Math.min(1,Math.max(.1,C/500));return{x:Math.random()*l,y:w?Math.random()*i:d.current.direction==="download"?-10:i+10,speed:(1+Math.random()*2)*(.5+b*2),radius:1+Math.random()*2.5,opacity:.3+Math.random()*.5}},[]);return h.useEffect(()=>{const l=n.current;if(!l)return;const i=l.getContext("2d");if(!i)return;if(g){const y=()=>{const f=l.getBoundingClientRect(),p=window.devicePixelRatio||1;l.width=f.width*p,l.height=f.height*p,i.scale(p,p);const[j,S,N]=E(d.current.color),$=i.createLinearGradient(0,0,0,f.height);$.addColorStop(0,`rgba(${j},${S},${N},0.03)`),$.addColorStop(.5,`rgba(${j},${S},${N},0.08)`),$.addColorStop(1,`rgba(${j},${S},${N},0.03)`),i.fillStyle=$,i.fillRect(0,0,f.width,f.height)};y();const v=new ResizeObserver(y);return v.observe(l),()=>v.disconnect()}const w=new ResizeObserver(y=>{for(const v of y){const{width:f,height:p}=v.contentRect,j=window.devicePixelRatio||1;l.width=f*j,l.height=p*j,c.current={w:f,h:p}}});w.observe(l);const C=l.clientWidth||400,b=l.clientHeight||300;c.current={w:C,h:b},o.current=Array.from({length:80},()=>a(C,b,!0));function k(){const{w:y,h:v}=c.current;if(y===0||v===0){m.current=requestAnimationFrame(k);return}const f=window.devicePixelRatio||1;i.clearRect(0,0,y*f,v*f),i.save(),i.scale(f,f);const{direction:p,bandwidth:j,color:S}=d.current,[N,$,F]=E(S),R=Math.min(120,Math.max(60,Math.floor(40+j/5))),M=o.current;for(;M.length<R;)M.push(a(y,v,!1));M.length>R+10&&M.splice(R,M.length-R),i.globalCompositeOperation="lighter";for(let x=M.length-1;x>=0;x--){const u=M[x];if(p==="download"){if(u.y+=u.speed,u.y>v+10){M[x]=a(y,v,!1);continue}}else if(u.y-=u.speed,u.y<-10){M[x]=a(y,v,!1);continue}const _=i.createRadialGradient(u.x,u.y,0,u.x,u.y,u.radius*3);_.addColorStop(0,`rgba(${N},${$},${F},${u.opacity})`),_.addColorStop(.4,`rgba(${N},${$},${F},${u.opacity*.4})`),_.addColorStop(1,`rgba(${N},${$},${F},0)`),i.beginPath(),i.arc(u.x,u.y,u.radius*3,0,Math.PI*2),i.fillStyle=_,i.fill()}i.restore(),m.current=requestAnimationFrame(k)}return m.current=requestAnimationFrame(k),()=>{cancelAnimationFrame(m.current),w.disconnect()}},[g,a]),e.jsx("canvas",{ref:n,className:"absolute inset-0 w-full h-full pointer-events-none",style:{opacity:.6}})}function B({samples:t,peak:s,color:r}){if(t.length<2)return null;const n=320,o=80,m=4,c=4,d=4,g=n-m*2,a=o-c-d,l=Math.max(s*1.1,10),i=t[0].time,w=t[t.length-1].time,C=Math.max(w-i,1),b=t.map(p=>{const j=m+(p.time-i)/C*g,S=c+a-p.value/l*a;return{x:j,y:S}}),k=b.map(p=>`${p.x},${p.y}`).join(" "),y=`M ${b[0].x},${c+a} `+b.map(p=>`L ${p.x},${p.y}`).join(" ")+` L ${b[b.length-1].x},${c+a} Z`,v=b[b.length-1],f="speed-graph-glow";return e.jsx("div",{className:"w-full max-w-xs mx-auto",children:e.jsxs("svg",{viewBox:`0 0 ${n} ${o}`,className:"w-full",style:{height:80},preserveAspectRatio:"none",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:f,x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),e.jsx("feFlood",{floodColor:r,floodOpacity:"0.5",result:"color"}),e.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"graph-fill-grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:r,stopOpacity:"0.02"})]})]}),[.25,.5,.75].map(p=>{const j=c+a-p*a;return e.jsx("line",{x1:m,y1:j,x2:n-m,y2:j,stroke:"var(--g-border)",strokeWidth:"0.5",opacity:"0.3"},p)}),e.jsx("path",{d:y,fill:"url(#graph-fill-grad)"}),e.jsx("polyline",{points:k,fill:"none",stroke:r,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",filter:`url(#${f})`}),e.jsxs("circle",{cx:v.x,cy:v.y,r:"4",fill:r,opacity:"0.9",children:[e.jsx("animate",{attributeName:"r",values:"3;5;3",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.9;0.5;0.9",dur:"1.5s",repeatCount:"indefinite"})]})]})})}function ve({elapsed:t,color:s="var(--g-text-secondary)"}){const r=Math.floor(t),n=Math.floor(r/60),o=r%60,m=`${n}:${String(o).padStart(2,"0")}`;return e.jsx("span",{className:"text-sm tabular-nums",style:{color:s,fontVariantNumeric:"tabular-nums"},children:m})}const ye={idle:"Waiting...",started:"Initializing...",ping:"Measuring Latency",download:"Testing Download",upload:"Testing Upload",complete:"Test Complete",error:"Test Failed"},je={idle:"var(--g-text-secondary)",started:"var(--g-teal)",ping:"var(--g-orange)",download:"var(--g-blue)",upload:"var(--g-green)",complete:"var(--g-green)",error:"var(--g-red)"},be={download:"#007AFF",upload:"#34C759"},we={idle:ue,started:L,ping:L,download:le,upload:ie,complete:L,error:L};function z({label:t,value:s,unit:r,color:n,delay:o}){const m=K(s,800);return e.jsx("div",{className:"flex flex-col items-center g-animate-in",style:{animationDelay:`${o}ms`},children:e.jsxs(A,{padding:"md",depth:"elevated",className:"w-full text-center",children:[e.jsx("span",{className:"text-3xl font-bold tabular-nums block",style:{color:n,textShadow:`0 0 16px ${n}30`},children:m.toFixed(1)}),e.jsx("span",{className:"text-xs block mt-1",style:{color:"var(--g-text-secondary)"},children:r}),e.jsx("span",{className:"text-xs font-medium block mt-1 uppercase tracking-wider",style:{color:"var(--g-text-tertiary)"},children:t})]})})}function ke({progress:t}){const s=t.phase,r=je[s]||"var(--g-blue)",n=we[s]||L,o=s!=="idle"&&s!=="complete"&&s!=="error",m=s==="download"||s==="upload",c=fe(),d=h.useRef(s);return h.useEffect(()=>{d.current!==s&&((s==="download"||s==="upload")&&c.reset(),d.current=s),m&&t.bandwidth_mbps!==void 0&&t.elapsed!==void 0&&c.push(t.bandwidth_mbps,t.elapsed)},[s,t.bandwidth_mbps,t.elapsed,m,c]),e.jsxs(A,{padding:"none",depth:"elevated",className:"relative overflow-hidden",children:[m&&e.jsx(T,{direction:s,bandwidth:t.bandwidth_mbps||0,color:be[s]||r}),s==="started"&&e.jsx(T,{direction:"download",bandwidth:5,color:"var(--g-teal)"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-5 py-8 px-6",children:[e.jsxs("div",{className:"flex items-center justify-between w-full max-w-md",children:[e.jsxs(Z,{color:r,children:[o&&e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:r,boxShadow:`0 0 8px ${r}`,animation:"g-breathe 1.5s ease-in-out infinite"}}),e.jsx(n,{className:"w-3.5 h-3.5"}),ye[s]||s]}),o&&t.elapsed!==void 0&&e.jsx(ve,{elapsed:t.elapsed,color:r})]},s),e.jsxs("div",{className:"w-full flex flex-col items-center gap-4 g-phase-enter",children:[s==="started"&&e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(I,{value:30,max:100,size:120,strokeWidth:4,color:"var(--g-teal)",glow:!0,children:e.jsx(L,{className:"w-8 h-8",style:{color:"var(--g-teal)",animation:"g-breathe 2s ease-in-out infinite"}})}),e.jsx("p",{className:"text-xs",style:{color:"var(--g-text-tertiary)"},children:"Connecting to server..."})]}),s==="ping"&&e.jsx("div",{className:"flex flex-col items-center gap-3",children:e.jsx(I,{value:(t.progress||0)*100,max:100,size:140,strokeWidth:6,color:"var(--g-orange)",glow:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-3xl font-bold tabular-nums",style:{color:"var(--g-orange)",textShadow:"0 0 16px rgba(255, 149, 0, 0.3)"},children:(t.ping_ms||0).toFixed(1)}),e.jsx("span",{className:"text-xs block",style:{color:"var(--g-text-secondary)"},children:"ms"})]})})}),s==="download"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{value:t.bandwidth_mbps||0,label:"Download",color:"var(--g-blue)",glowColor:"#007AFF"}),e.jsx(B,{samples:c.samples,peak:c.peak,color:"var(--g-blue)",version:c.version})]}),s==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{value:t.bandwidth_mbps||0,label:"Upload",color:"var(--g-green)",glowColor:"#34C759"}),e.jsx(B,{samples:c.samples,peak:c.peak,color:"var(--g-green)",version:c.version})]}),s==="complete"&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-md",children:[e.jsx(z,{label:"Download",value:t.download_mbps||0,unit:"Mbps",color:"var(--g-blue)",delay:0}),e.jsx(z,{label:"Upload",value:t.upload_mbps||0,unit:"Mbps",color:"var(--g-green)",delay:100}),e.jsx(z,{label:"Ping",value:t.ping_ms||0,unit:"ms",color:"var(--g-orange)",delay:200})]}),s==="error"&&e.jsx("div",{className:"text-center g-animate-in",children:e.jsx("p",{className:"text-sm",style:{color:"var(--g-red)"},children:t.message||"An error occurred"})})]},`content-${s}`),m&&t.progress!==void 0&&e.jsxs("div",{className:"w-full max-w-xs",children:[e.jsx("div",{className:"glass-progress",style:{height:6},children:e.jsx("div",{className:"glass-progress-bar",style:{width:`${Math.min(100,(t.progress||0)*100)}%`,backgroundColor:r,boxShadow:`0 0 8px ${r}60`}})}),e.jsxs("p",{className:"text-[10px] text-center mt-2 tabular-nums",style:{color:"var(--g-text-tertiary)"},children:[Math.round((t.progress||0)*100),"%"]})]})]})]})}function Fe(){const{data:t,isLoading:s}=ee(),{data:r}=te({page_size:50}),{data:n}=se(),{progress:o,isStreaming:m}=xe(),c=Q();if(h.useEffect(()=>{o.phase==="complete"&&(c.invalidateQueries({queryKey:["measurement"]}),c.invalidateQueries({queryKey:["measurements"]}),c.invalidateQueries({queryKey:["statistics"]}))},[o.phase,c]),s)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(ae,{size:32})});const d=m||o.phase!=="idle"&&o.phase!=="complete"&&o.phase!=="error";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 g-animate-in",style:{color:"var(--g-text)"},children:[e.jsx(de,{className:"w-5 h-5"}),"Dashboard"]}),d&&e.jsx("div",{className:"g-animate-scale",children:e.jsx(ke,{progress:o})}),!d&&t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 g-animate-in g-stagger-1",children:[e.jsx(D,{label:"Download",value:t.download_mbps,color:"var(--g-blue)",threshold:n==null?void 0:n.download_threshold_mbps}),e.jsx(D,{label:"Upload",value:t.upload_mbps,color:"var(--g-green)",threshold:n==null?void 0:n.upload_threshold_mbps}),e.jsx(D,{label:"Ping",value:t.ping_latency_ms,unit:"ms",color:"var(--g-orange)"})]}),e.jsx("div",{className:"g-animate-in g-stagger-2",children:e.jsx(pe,{measurement:t})}),r&&r.items.length>1&&e.jsxs("div",{className:"space-y-4 g-animate-in g-stagger-3",children:[e.jsx(he,{measurements:r.items}),e.jsx(ge,{measurements:r.items})]})]}):d?null:e.jsxs("div",{className:"text-center py-20 g-animate-in",style:{color:"var(--g-text-secondary)"},children:[e.jsx("p",{className:"text-lg font-medium",children:"No measurements yet"}),e.jsx("p",{className:"text-sm mt-1",children:'Click "Run Test" to perform your first speed test.'})]})]})}export{Fe as DashboardPage};
