import{j as e,a as d}from"./query-CSQiZfg4.js";import{c as v,k as M,S as _,l as L,m as I,h as z,M as D,n as $,o as F,b as P,p as U,e as A}from"./index-B5AUc1iD.js";import{G as x}from"./GlassCard-BeFGED1K.js";import{b as G,c as b}from"./format-Cx2mhIEl.js";import{A as q}from"./activity-E_F_q7JA.js";import"./vendor-PRsJgg41.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],H=v("palette",E);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],B=v("save",V);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],N=v("server",R);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],S=v("timer",J);function u({label:s,className:c="",id:t,...l}){return e.jsxs("div",{children:[s&&e.jsx("label",{htmlFor:t,className:"block text-sm mb-1 transition-colors",style:{color:"var(--g-text-secondary)"},children:s}),e.jsx("input",{id:t,className:`glass-input ${c}`,...l})]})}function K({label:s,className:c="",id:t,children:l,...r}){return e.jsxs("div",{children:[s&&e.jsx("label",{htmlFor:t,className:"block text-sm mb-1",style:{color:"var(--g-text-secondary)"},children:s}),e.jsx("select",{id:t,className:`glass-select ${c}`,...r,children:l})]})}function O({value:s,onChange:c}){const{data:t,isLoading:l,error:r}=M(),[n,h]=d.useState("");if(l)return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{size:16}),e.jsx("span",{className:"text-sm",style:{color:"var(--g-text-secondary)"},children:"Loading servers..."})]});if(r)return e.jsx("p",{className:"text-sm",style:{color:"var(--g-red)"},children:"Failed to load servers. Speedtest CLI may not be available."});const m=(t==null?void 0:t.servers)||[],g=n?m.filter(a=>a.name.toLowerCase().includes(n.toLowerCase())||a.location.toLowerCase().includes(n.toLowerCase())||a.country.toLowerCase().includes(n.toLowerCase())):m;return e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Search servers...",value:n,onChange:a=>h(a.target.value),className:"glass-input"}),e.jsxs(K,{value:String(s),onChange:a=>c(Number(a.target.value)),children:[e.jsx("option",{value:"0",children:"Auto (nearest server)"}),g.map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.location,", ",a.country]},a.id))]})]})}const Q=[{value:"auto",label:"Auto",Icon:I},{value:"light",label:"Light",Icon:z},{value:"dark",label:"Dark",Icon:D}];function W(){const{theme:s,setTheme:c}=L();return e.jsx("div",{className:"flex gap-2",children:Q.map(({value:t,label:l,Icon:r})=>e.jsxs("button",{onClick:()=>c(t),className:"glass-btn flex-1 flex-col gap-1 py-3",style:{borderColor:s===t?"var(--g-blue)":void 0,background:s===t?"rgba(0, 122, 255, 0.1)":void 0,color:s===t?"var(--g-blue)":"var(--g-text)"},children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:l})]},t))})}function ae(){const{data:s,isLoading:c}=$(),{data:t}=F(),{data:l}=P(),r=U(),[n,h]=d.useState(""),[m,g]=d.useState(""),[a,y]=d.useState(""),[i,p]=d.useState(15),[j,f]=d.useState(0);if(d.useEffect(()=>{s&&(h(String(s.test_interval_minutes)),g(String(s.download_threshold_mbps)),y(String(s.upload_threshold_mbps)),p(s.tolerance_percent),f(s.preferred_server_id))},[s]),c)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(_,{size:32})});const k=()=>{r.mutate({test_interval_minutes:Number(n),download_threshold_mbps:Number(m),upload_threshold_mbps:Number(a),tolerance_percent:i,preferred_server_id:j})},w=Number(m)*(1-i/100),C=Number(a)*(1-i/100),T=o=>{f(o),r.mutate({preferred_server_id:o})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 g-animate-in",style:{color:"var(--g-text)"},children:[e.jsx(S,{className:"w-5 h-5"}),"Settings"]}),e.jsxs(x,{className:"g-animate-in g-stagger-1",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(S,{className:"w-4 h-4",style:{color:"var(--g-text-secondary)"}}),"Test Configuration"]}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsx(u,{label:"Test Interval (minutes)",type:"number",min:1,max:1440,value:n,onChange:o=>h(o.target.value)}),e.jsx(u,{label:"Download Threshold (Mbps)",type:"number",min:0,step:.1,value:m,onChange:o=>g(o.target.value)}),e.jsx(u,{label:"Upload Threshold (Mbps)",type:"number",min:0,step:.1,value:a,onChange:o=>y(o.target.value)}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--g-text)"},children:["Tolerance: ",i,"%"]}),e.jsx("input",{type:"range",min:0,max:50,step:1,value:i,onChange:o=>p(Number(o.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, var(--g-accent) 0%, var(--g-accent) ${i*2}%, var(--g-border) ${i*2}%, var(--g-border) 100%)`}}),e.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--g-text-secondary)"},children:["Minimum acceptable: ",w.toFixed(1)," Mbps down / ",C.toFixed(1)," Mbps up"]})]}),e.jsxs(A,{variant:"primary",onClick:k,disabled:r.isPending,children:[e.jsx(B,{className:"w-4 h-4"}),r.isPending?"Saving...":"Save Settings"]}),r.isSuccess&&e.jsx("p",{className:"text-xs",style:{color:"var(--g-green)"},children:"Settings saved."})]})]}),e.jsxs(x,{className:"g-animate-in g-stagger-2",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(N,{className:"w-4 h-4",style:{color:"var(--g-text-secondary)"}}),"Server Selection"]}),e.jsx("div",{className:"max-w-md",children:e.jsx(O,{value:j,onChange:T})})]}),e.jsxs(x,{className:"g-animate-in g-stagger-3",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(H,{className:"w-4 h-4",style:{color:"var(--g-text-secondary)"}}),"Appearance"]}),e.jsx("div",{className:"max-w-sm",children:e.jsx(W,{})})]}),t&&e.jsxs(x,{className:"g-animate-in g-stagger-4",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(q,{className:"w-4 h-4",style:{color:"var(--g-text-secondary)"}}),"System Status"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Version"}),e.jsxs("p",{className:"font-medium",style:{color:"var(--g-accent)"},children:["v",t.version]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Uptime"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:G(t.uptime_seconds)})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Total Measurements"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.total_measurements})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Total Failures"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:t.total_failures})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Database Size"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:b(t.db_size_bytes)})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Data Used by Tests"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:l?b(l.total_data_used_bytes):"â€”"})]})]})]}),s&&e.jsxs(x,{className:"g-animate-in g-stagger-5",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-4 flex items-center gap-2",style:{color:"var(--g-text)"},children:[e.jsx(N,{className:"w-4 h-4",style:{color:"var(--g-text-secondary)"}}),"Server Info"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Host"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:s.host})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Port"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:s.port})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--g-text-secondary)"},children:"Log Level"}),e.jsx("p",{className:"font-medium",style:{color:"var(--g-text)"},children:s.log_level})]})]})]})]})}export{ae as SettingsPage};
